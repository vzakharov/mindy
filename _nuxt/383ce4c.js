(window.webpackJsonp=window.webpackJsonp||[]).push([[13,10],{395:function(t,e,n){"use strict";var r,o,c,l=n(33);n(1);o=!1,r=function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.args,r=e.callback,c=e.method,d=void 0===c?"debug":c;o||((t=console)[d].apply(t,Object(l.a)(n)),"function"==typeof r&&r());return n[n.length-1]},c=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return r({args:e})},c.breakpoint=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return r({args:e,callback:function(){}})},["log","warn","debug","error"].forEach((function(t){return c[t]=function(){for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return r({args:n,method:t})}})),c.disable=function(){return o=!0},e.a=c},400:function(t,e,n){"use strict";var r,o=n(0),c=n(34);n(84),n(1),n(15),n(5),n(4),n(2),n(6),n(3),n(7);function l(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function d(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?l(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):l(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}e.a={data:function(){return{whilst:{}}},methods:{actionPromise:function(t){var e;return null!=(e=this.whilst[t])?e:Promise.resolve()},try:(r=Object(c.a)(regeneratorRuntime.mark((function t(e,n){var r,o,c,l,track,f,h,v,m,y,O,w=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=w.length>2&&void 0!==w[2]?w[2]:{},o=r.errorMessage,c=r.except,l=r.track,track=void 0===l||l,f=r.mixpanelProps,track&&(v=this.mixpanel),this[e]=!0,y=null,m=null,this.whilst[e]=new Promise((function(t,e){return y=t,m=e})),t.prev=6,console.log("Started ".concat(e)),null!=v&&v.track("".concat(e," started"),f),t.t0=y,t.next=12,n.call(this);case 12:return t.t1=O=t.sent,(0,t.t0)(t.t1),null!=v&&v.track("".concat(e," succeeded"),f),t.abrupt("return",O);case 18:return t.prev=18,t.t2=t.catch(6),h=t.t2,console.error("Error while ".concat(e,": ").concat(h)),null!=v&&v.track("".concat(e," failed"),d({error:h.message},f)),"function"==typeof o&&(o=o(h)),this.alert(o),"function"==typeof c&&c(h),t.abrupt("return",m(h));case 27:return t.prev=27,this[e]=!1,console.log("Finished ".concat(e)),t.finish(27);case 31:case"end":return t.stop()}}),t,this,[[6,18,27,31]])}))),function(t,e){return r.apply(this,arguments)}),alert:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Something went wrong.";return this.$bvToast.toast("See console for error details.",{title:t,variant:"danger",solid:!0,autoHideDelay:5e3})}}}},401:function(t,e,n){"use strict";n(1),n(3),n(5);e.a={created:function(){var t=this;return this.updated={},this.update={},Object.keys(this.$options.propsData).forEach((function(e){return Object.defineProperty(t.updated,e,{get:function(){return t[e]},set:function(n){return t.$emit("update:".concat(e),n),console.debug("Emitted `update:".concat(e,"` event with value"),n)}}),t.update[e]=function(n){return t.updated[e]=Object.assign({},t.updated[e],n)}}))}}},402:function(t,e,n){"use strict";var r=n(427),o=n.n(r);e.a={data:function(){return o.a.init("f9ed5012981005142ed33251c919eb41",{debug:!0}),{mixpanel:o.a}}}},404:function(t,e,n){"use strict";n.r(e);var r={props:["icon"]},o=n(68),component=Object(o.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("svg",{staticClass:"bi bi-send",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 16 16"}},["send"===t.icon?n("path",{attrs:{d:"M15.854.146a.5.5 0 0 1 .11.54l-5.819 14.547a.75.75 0 0 1-1.329.124l-3.178-4.995L.643 7.184a.75.75 0 0 1 .124-1.33L15.314.037a.5.5 0 0 1 .54.11ZM6.636 10.07l2.761 4.338L14.13 2.576 6.636 10.07Zm6.787-8.201L1.591 6.602l4.339 2.76 7.494-7.493Z"}}):"magic"===t.icon?n("path",{attrs:{d:"M9.5 2.672a.5.5 0 1 0 1 0V.843a.5.5 0 0 0-1 0v1.829Zm4.5.035A.5.5 0 0 0 13.293 2L12 3.293a.5.5 0 1 0 .707.707L14 2.707ZM7.293 4A.5.5 0 1 0 8 3.293L6.707 2A.5.5 0 0 0 6 2.707L7.293 4Zm-.621 2.5a.5.5 0 1 0 0-1H4.843a.5.5 0 1 0 0 1h1.829Zm8.485 0a.5.5 0 1 0 0-1h-1.829a.5.5 0 0 0 0 1h1.829ZM13.293 10A.5.5 0 1 0 14 9.293L12.707 8a.5.5 0 1 0-.707.707L13.293 10ZM9.5 11.157a.5.5 0 0 0 1 0V9.328a.5.5 0 0 0-1 0v1.829Zm1.854-5.097a.5.5 0 0 0 0-.706l-.708-.708a.5.5 0 0 0-.707 0L8.646 5.94a.5.5 0 0 0 0 .707l.708.708a.5.5 0 0 0 .707 0l1.293-1.293Zm-3 3a.5.5 0 0 0 0-.706l-.708-.708a.5.5 0 0 0-.707 0L.646 13.94a.5.5 0 0 0 0 .707l.708.708a.5.5 0 0 0 .707 0L8.354 9.06Z"}}):t._e()])}),[],!1,null,null,null);e.default=component.exports},410:function(t,e,n){"use strict";(function(t){n(5),n(4),n(2),n(1),n(6),n(3),n(7);var r=n(34),o=n(0),c=(n(84),n(85)),l=n.n(c),d=n(396),f=n.n(d),h=n(395);function v(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function m(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?v(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):v(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}e.a=function(){var e,n,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},c=o.polygonAPIurl,d=void 0===c?"https://ideality.app/api/polygon/":c,v=o.templatesDatabaseId,y=void 0===v?"485b3bd6b4524c1dbd9ef2acc5bccfbf":v,O=o.upvotesDatabaseId,w=void 0===O?"ecdca719f95b4eeab4c86118e44d162c":O,j=o.openAIkey,x=void 0===j?t.env.OPENAI_KEY:j,k=o.defaultParameters,P=void 0===k?{}:k,C=o.spent,I=o.vm,S=o.vmKey;return e=l.a.create({baseURL:d}),console.log("Polygon client initialized",{polygonAPIurl:d,templatesDatabaseId:y,upvotesDatabaseId:w,openAIkey:x,defaultParameters:P}),{spent:C,run:function(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return console.log("Running",t,{variables:r,parameters:o}),e.post("/run",{databaseId:y,slug:t,openAIkey:x,variables:r,parameters:m(m({},P),o)}).then((function(t){var data=t.data;return Object(h.a)("USD spent",n.spent+=data.approximateCost),I&&(I[S]=n.spent),data}))},generate:(n=Object(r.a)(regeneratorRuntime.mark((function t(n,input){var data,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("Generating",n,input),f.a.isArray(n)||(n=[n]),t.next=4,e.post("/generate",{outputKeys:n,input:input,openAIkey:x});case 4:return r=t.sent,data=r.data,t.abrupt("return",Object(h.a)("Generated:",data));case 7:case"end":return t.stop()}}),t)}))),function(t,e){return n.apply(this,arguments)}),upvote:function(t){return console.log("Upvoting",t),e.post("/upvote",{databaseId:w,generationId:t}).then((function(t){return t.data}))}}}}).call(this,n(134))},411:function(t,e,n){"use strict";var r,o=n(33),c=(n(133),n(1),n(2),n(15),n(441),n(442),n(16),n(173),n(3),n(396)),l=n.n(c),d=n(395);r=function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.childOrder,c=void 0===r?[["createdAt","desc"]]:r,f=n.vm;return Object.assign(this,{items:t,root:{id:0},find:function(t){return l.a.find(this.items,{id:t})},getters:{parent:function(e){return t.find((function(i){return i.id===e.parentId}))||this.root},children:function(e){return l()(t).filter((function(t){return e?t.parentId===e.id:!t.parentId})).orderBy(c).value()},descendants:function(t){var e=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return[].concat(Object(o.a)(n?[t]:[]),Object(o.a)(l.a.flatMap(this.children(t),(function(t){return e.descendants(t)}))))},siblings:function(e){var n=this,r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return l.a.orderBy(t.filter((function(t){return n.parent(t)===n.parent(e)&&(r||t!==e)}),c))},numSiblings:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.siblings(t,e).length},siblingIndex:function(t){return this.siblings(t).indexOf(t)},sibling:function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;for(e=((e=this.siblingIndex(t))+n)%this.numSiblings(t);e<0;)e+=this.numSiblings(t);return this.siblings(t)[e]},nextSibling:function(t){return this.sibling(t,1)},prevSibling:function(t){return this.sibling(t,-1)},ancestors:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.breakAt;return(null!=t?t.parentId:void 0)&&t.parentId!==(null!=n?n.id:void 0)?[this.parent(t)].concat(Object(o.a)(this.ancestors(this.parent(t),{breakAt:n}))):[]},lineage:function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.includeSelf,c=void 0===r||r,l=n.breakAt;return e=Object(o.a)(this.ancestors(t,{breakAt:l})).reverse(),c&&t&&e.push(t),(null!=e?e[0]:void 0)===this.root&&e.shift(),e},heir:function(t){var e,n,r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=o.nested;return e=this.children(t),t&&e.length?(n=e[null!=(r=t.heirIndex)?r:0],c?this.heir(n,{nested:!0}):void 0):t},thread:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(t)return Object(d.a)("thread",this.lineage(e?this.heir(t,{nested:!0}):t))},heritage:function(t){var e,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=r.includeSelf,c=void 0===o||o;return Object(d.a)("Calculating heritage for ".concat(null!=t?t.id:void 0)),Object(d.a)("thread",n=this.thread(t)),Object(d.a)("lineage",e=this.lineage(t,{includeSelf:!c})),Object(d.a)("heritage",l.a.difference(n,e))}},cache:{},createChild:function(e,n){return Object(d.a)({item:e},Object.assign(n,{parentId:null!=e?e.id:void 0,id:l()(t).map("id").max()+1||1,createdAt:new Date}))},clone:function(t){return this.createChild(this.parent(t),l.a.omit(t,"id","createdAt"))},delete:function(e){var n,r=this;return n=this.children(e),t.splice(t.indexOf(e),1),n.forEach((function(t){return r.delete(t)})),t},nudge:function(t){var e,n;if(n=this.parent(t))return Object(d.a)("Nudging item ".concat(t.id," to be the heir of its parent ").concat(n.id),e=this.siblingIndex(t)),f?f.$set(n,"heirIndex",e):l.a.assign(n,{heirIndex:e})}}),l.a.forEach(this.getters,(function(t,n){return e[n]=function(e){for(var path,r,o=arguments.length,c=new Array(o>1?o-1:0),d=1;d<o;d++)c[d-1]=arguments[d];return path=[null!=(r=null!=e?e.id:void 0)?r:"undefined",n,JSON.stringify(c)],l.a.has(this.cache,path)||l.a.set(this.cache,path,t.apply(this,[e].concat(c))),l.a.get(this.cache,path)}})),this},e.a=r},414:function(t,e,n){"use strict";n(1),n(3),n(2);var r=n(396),o=n.n(r);n(395);e.a=function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.footerRef;return e=function(element,footer){var t,e,n;return e=element.getBoundingClientRect().top,t=(null!=footer?footer.getBoundingClientRect().height:void 0)||0,n=window.innerHeight,element.style.height="".concat(n-e-t-1,"px")},{data:function(){return{autoHeight:{observer:null}}},mounted:function(){var n,element,footer,c,l=this,d=o.a.mapValues(this.$refs,(function(t){var e;return null!=(e=t.$el)?e:t}));return element=d[t],footer=d[r],(n=function(){return e(element,footer)})(),window.addEventListener("resize",o.a.debounce(n,100)),null!=(c=this.autoHeight.observer)&&c.disconnect(),this.autoHeight.observer=new MutationObserver(n),[element,footer].filter(o.a.identity).forEach((function(element){return l.autoHeight.observer.observe(element,{attributes:!0,childList:!0,characterData:!0,subtree:!0})}))}}}},426:function(t,e,n){"use strict";e.a={data:function(){return{window:null}},mounted:function(){return Object.assign(this,{window:window})}}},428:function(t,e,n){var content=n(487);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(109).default)("6b5548ee",content,!0,{sourceMap:!1})},486:function(t,e,n){"use strict";n(428)},487:function(t,e,n){var r=n(108)(!1);r.push([t.i,"body{font-size:.75em}.lightgray{color:#bbb}.icon-sm{font-size:100%!important}.message-content :last-child{margin-bottom:0}label{font-weight:700}.footer{border-top:1px solid #e7e7e7}.footer,.header{background-color:#f7f7f7}.header{border-bottom:1px solid #e7e7e7}",""]),t.exports=r},533:function(t,e,n){"use strict";n.r(e);n(86),n(110),n(85),n(396),n(443),n(411),n(395);var r=n(401),o=n(400),c=n(426),l=n(402),d=n(414);n(410);var f={props:["messages","routedMessage","title","tree","thread","rootMessage","lastMessageWithContext"],mixins:[r.a,o.a,c.a,l.a,Object(d.a)("messages",{footerRef:"input"})],data:function(){return{previousThread:null,newMessage:""}},computed:{isMultiline:function(){return this.newMessage.includes("\n")}}},h=(n(486),n(68)),component=Object(h.a)(f,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"h-100"},[n("div",{staticClass:"bg-light border-bottom px-3 py-2 py-md-4 d-flex justify-content-between align-items-center"},[n("div",{staticClass:"d-flex"},[n("h4",{staticClass:"mb-0"},[t._v(t._s(t.title))]),n("button",{staticClass:"btn btn-light btn-sm pl-2 lightgray"},[n("b-icon-pencil",{staticClass:"icon-sm pb-1"})],1)]),n("div",{staticClass:"d-flex"},[n("button",{staticClass:"btn btn-outline-secondary btn-sm mx-1 px-2"},[n("b-icon",{staticClass:"px-1",attrs:{icon:"bookmark"}}),t._v("Save")],1),n("button",{staticClass:"btn btn-light btn-sm mx-1 lightgray"},[n("b-icon",{attrs:{icon:"gear"}})],1)])]),n("div",{ref:"messages",staticStyle:{"overflow-y":"auto",height:"100%"},attrs:{id:"messages"}},t._l(t.thread,(function(e,r){return n("nuxt-link",{key:r+"-"+t.routedMessage.id,staticClass:"message px-2",style:{"background-color":r%2?"#f7f7f7":"#fff",border:"1px solid "+(e===t.routedMessage&&t.routedMessage!=t.thread[t.thread.length-1]?"#007bff":"#fff"),cursor:"pointer"},attrs:{tag:"div",id:"message-"+e.id,to:{query:{id:e.id}}}},[t.tree.numSiblings(e)>1&&e!==t.thread[0]?[n("div",{staticStyle:{"font-size":"0.8em",color:"#aaa",float:"right"}},[n("nuxt-link",{staticClass:"mr-1",staticStyle:{color:"inherit"},attrs:{to:{query:{id:t.tree.sibling(e,-1).id}}},domProps:{textContent:t._s("< "+(t.tree.siblingIndex(e)+1))}}),t._v("/"),n("nuxt-link",{staticClass:"ml-1",staticStyle:{color:"inherit"},attrs:{to:{query:{id:t.tree.sibling(e,1).id}}},domProps:{textContent:t._s(t.tree.numSiblings(e)+" >")}})],1)]:t._e(),n("strong",[t._v(t._s(e.user.name))]),t._v(":"),n("div",{domProps:{innerHTML:t._s(t.$md.render(e.content))}})],2)})),1),n("div",{ref:"input",staticClass:"input-group p-3 bg-light border-top"},[n("b-textarea",{staticClass:"form-control",style:Object.assign({},{overflow:"auto"},t.isMultiline?{fontSize:"1em"}:{height:"2.5em"}),attrs:{type:"text",placeholder:"Shift+Enter for new line",rows:"1","max-rows":"10"},model:{value:t.newMessage,callback:function(e){t.newMessage=e},expression:"newMessage"}}),n("div",{staticClass:"input-group-append"},[n("button",{staticClass:"btn btn-primary",attrs:{type:"button"}},[n("Icon",{attrs:{icon:"send"}})],1)])],1)])}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{Icon:n(404).default})}}]);