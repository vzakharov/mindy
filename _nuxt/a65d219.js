(window.webpackJsonp=window.webpackJsonp||[]).push([[11,5,6,9],{392:function(e,t,n){"use strict";var r,o=n(0);r=function(e){return e},t.a=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=n.deep,l=n.save,d=void 0===l?r:l,h=n.load,f=void 0===h?r:h;return{data:function(){return Object(o.a)({},e,null)},watch:(t={},Object(o.a)(t,e,{deep:c,handler:function(e){return this.$emit("input",d.call(this,e))}}),Object(o.a)(t,"value",{deep:c,immediate:!0,handler:function(t){return this[e]=f.call(this,t)}}),t)}}},393:function(e,t,n){"use strict";var r,o,c=n(33);r=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.args,r=t.callback,o=t.logOrDebug,l=void 0===o?"debug":o;return(e=console)[l].apply(e,Object(c.a)(n)),"function"==typeof r&&r(),n[n.length-1]},o=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r({args:t})},o.breakpoint=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r({args:t,callback:function(){}})},o.always=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r({args:t,logOrDebug:"log"})},t.a=o},396:function(e,t,n){"use strict";var r=n(0),o=n(40),c=(n(1),n(51),n(15),n(3),n(5),n(4),n(2),n(6),n(7),n(408));function l(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function d(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?l(Object(source),!0).forEach((function(t){Object(r.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):l(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}t.a=function(){var e,t,n,l,h,f=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},m=f.prefix,v=f.keys,y=f.format,x=void 0===y?"json":y;return"yaml"===x?(l=c.a.load,e=c.a.dump):(l=JSON.parse,e=JSON.stringify),n=!1,h=null,t=function(e){return m?"".concat(m,".").concat(e):e},{data:function(){return{localLoaded:new Promise((function(e){return h=e}))}},mounted:function(){var e=this;return v.forEach((function(n){var r,c,h,f,m;return m=localStorage.getItem(t(n)),r=e[n],console.log({key:n,localValue:m,defaultValue:r}),f="object"===Object(o.a)(r)&&null!==r,c=Array.isArray(r),h="number"==typeof r,m=f?l(m||null):h?parseFloat(m||null):"boolean"==typeof r?"boolean"==typeof m?m:"true"===m:m||null,e[n]=f&&!c?d(d({},r),m):m||r})),this.$nextTick((function(){return n=!0,h()}))},watch:d({},v.reduce((function(c,l){return Object.assign(c,Object(r.a)({},l,{deep:!0,handler:function(r){var c;if(n)return c=t(l),console.log("Syncing ".concat(l," to local storage key ").concat(c)),localStorage.setItem(c,"object"===Object(o.a)(r)?e(r):r)}}))}),{}))}}},397:function(e,t,n){"use strict";var r=n(409),o=n.n(r);t.a={data:function(){return o.a.init("f9ed5012981005142ed33251c919eb41",{debug:!0}),{mixpanel:o.a}}}},398:function(e,t,n){"use strict";n.r(t);var r,o=n(40),c=(n(247),n(15),n(19),n(1),n(37),n(4),n(62),n(10),n(30),n(22),n(392));r=function(e){return"number"===this.inputProps.type?Number(e):e};var l={mixins:[Object(c.a)("setting",{save:r,load:r})],props:{value:{required:!0},properties:{type:Object,default:function(){return{}}}},computed:{id:function(){return"edit-settings-input-".concat(this.$vnode.key,"-").concat(Math.random().toString(36).slice(2))},label:function(){return this.properties.label||this.$vnode.key},description:function(){var e;return e=this.properties.description,(null!=e?e[!0]:void 0)&&e[!1]?e[this.setting]:e},inputTagAndProps:function(){var e,t,n=this;if(t={multiline:function(){var e;return{tag:"b-textarea",props:{rows:Math.max(10,Math.min(20,null!=(e=n.value)?e.split("\n").length:void 0)),style:n.properties.monospace?"font-family: monospace; tab-size: 2; -moz-tab-size: 2;":"",placeholder:n.properties.placeholder||"Enter text here"}}},text:{tag:"b-input",props:{type:"text",placeholder:this.properties.placeholder||"Enter text here"}},number:{tag:"b-input",props:{type:"number",placeholder:this.properties.placeholder||"Enter a number here"}},boolean:{tag:"b-checkbox",props:{switch:!0}}},this.properties.type)return("function"==typeof(e=t[this.properties.type])?e():void 0)||e;switch(Object(o.a)(this.value)){case"number":return t.number;case"boolean":return t.boolean;default:return t.text}},inputTag:function(){return this.inputTagAndProps.tag},inputProps:function(){return this.inputTagAndProps.props}},methods:{onTab:function(e){var t,n,r,o,c,l,d=this;if(this.properties.monospace){var h=this.$refs.input.$el;return o=h.selectionStart,r=h.selectionEnd,l=this.value.substring(0,o),n=this.value.substring(o,r),c=this.value.substring(r),t=l.lastIndexOf("\n")||0,n=l.substring(t+1,o)+n,l=l.substring(0,t+1),n=n.replace(/(\n|^)(\t?)/g,e.shiftKey?"$1":"$1$2\t"),this.setting=l+n+c,e.preventDefault(),this.$nextTick((function(){return d.$refs.input.$el.setSelectionRange(o+(e.shiftKey?-1:1),r+(e.shiftKey?-1:1))}))}}}},d=n(68),component=Object(d.a)(l,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-form-group",e._b({attrs:{"label-for":e.id}},"b-form-group",{label:e.label,description:e.description},!1),[n(e.inputTag,e._b({ref:"input",tag:"component",attrs:{id:e.id},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"tab",9,t.key,"Tab")?null:e.onTab.apply(null,arguments)}},model:{value:e.setting,callback:function(t){e.setting=t},expression:"setting"}},"component",e.inputProps,!1))],1)}),[],!1,null,null,null);t.default=component.exports},400:function(e,t,n){var content=n(412);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(109).default)("2c33bcae",content,!0,{sourceMap:!1})},401:function(e,t,n){var content=n(414);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(109).default)("0cbe086a",content,!0,{sourceMap:!1})},402:function(e,t,n){"use strict";n.r(t);var r=n(392),o={mixins:[Object(r.a)("settings",{deep:!0})],props:{title:{type:String,default:"Edit settings"},okTitle:{type:String,default:"Save"},cancelTitle:{type:String,default:"Cancel"},value:{type:Object,required:!0},properties:{type:Object,default:function(){return{}}}}},c=n(68),component=Object(c.a)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-form",{staticStyle:{width:"100%"}},e._l(e.settings,(function(t,r){return n("EditSettingsInput",{key:r,attrs:{properties:e.properties[r]},model:{value:e.settings[r],callback:function(t){e.$set(e.settings,r,t)},expression:"settings[key]"}})})),1)}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{EditSettingsInput:n(398).default})},404:function(e,t,n){"use strict";var r,o=n(0),c=n(34);n(84),n(1),n(15),n(5),n(4),n(2),n(6),n(3),n(7);function l(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function d(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?l(Object(source),!0).forEach((function(t){Object(o.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):l(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}t.a={data:function(){return{actionPromises:{}}},methods:{actionPromise:function(e){var t;return null!=(t=this.actionPromises[e])?t:Promise.resolve()},try:(r=Object(c.a)(regeneratorRuntime.mark((function e(t,n){var r,o,c,l,track,h,f,m,v,y,x=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=x.length>2&&void 0!==x[2]?x[2]:{},o=r.errorMessage,c=r.except,l=r.track,track=void 0===l||l,h=r.mixpanelProps,track&&(m=this.mixpanel),this[t]=!0,y=null,v=null,this.actionPromises[t]=new Promise((function(e,t){return y=e,v=t})),e.prev=6,console.log("Started ".concat(t)),null!=m&&m.track("".concat(t," started"),h),e.t0=y,e.next=12,n();case 12:return e.t1=e.sent,(0,e.t0)(e.t1),e.abrupt("return",null!=m?m.track("".concat(t," succeeded"),h):void 0);case 17:return e.prev=17,e.t2=e.catch(6),f=e.t2,console.error("Error while ".concat(t,": ").concat(f)),null!=m&&m.track("".concat(t," failed"),d({error:f.message},h)),"function"==typeof o&&(o=o(f)),this.alert(o),"function"==typeof c&&c(f),e.abrupt("return",v(f));case 26:return e.prev=26,this[t]=!1,console.log("Finished ".concat(t)),e.finish(26);case 30:case"end":return e.stop()}}),e,this,[[6,17,26,30]])}))),function(e,t){return r.apply(this,arguments)}),alert:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Something went wrong.";return this.$bvToast.toast("See console for error details.",{title:e,variant:"danger",solid:!0,autoHideDelay:5e3})}}}},405:function(e,t,n){"use strict";(function(e){n(5),n(4),n(2),n(1),n(6),n(3),n(7);var r=n(0),o=n(86),c=n.n(o);function l(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function d(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?l(Object(source),!0).forEach((function(t){Object(r.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):l(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}t.a=function(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.polygonAPIurl,o=void 0===r?"http://localhost:3700/api/polygon/":r,l=n.templatesDatabaseId,h=void 0===l?"485b3bd6b4524c1dbd9ef2acc5bccfbf":l,f=n.upvotesDatabaseId,m=void 0===f?"ecdca719f95b4eeab4c86118e44d162c":f,v=n.openAIkey,y=void 0===v?e.env.OPENAI_KEY:v,x=n.defaultParameters,k=void 0===x?{}:x;return t=c.a.create({baseURL:o}),{run:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return console.log("Running",e,{variables:n,parameters:r}),t.post("/run",{databaseId:h,slug:e,openAIkey:y,variables:n,parameters:d(d({},k),r)}).then((function(e){return e.data}))},upvote:function(e){return console.log("Upvoting",e),t.post("/upvote",{databaseId:m,generationId:e}).then((function(e){return e.data}))}}}}).call(this,n(133))},411:function(e,t,n){"use strict";n(400)},412:function(e,t,n){var r=n(108)(!1);r.push([e.i,'#eyes[data-v-69b3316a]{font-size:32px;font-family:monospace;white-space:pre}#monologue[data-v-69b3316a]{font-size:20px;font-family:"Playfair Display","Georgia","Times New Roman","Times",serif}',""]),e.exports=r},413:function(e,t,n){"use strict";n(401)},414:function(e,t,n){var r=n(108)(!1);r.push([e.i,".code[data-v-29df51c8]{font-family:monospace;background-color:#1e1e1e;color:#d4d4d4;height:calc(100% - 2.5rem)}",""]),e.exports=r},420:function(e,t,n){var content=n(448);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(109).default)("1b7833da",content,!0,{sourceMap:!1})},422:function(e,t,n){"use strict";n.r(t);n(171);var r,o,c=n(34),l=n(29),d=n(28),h=n(67),f=n(126),m=n(49),v=n(166),y=(n(84),n(403),n(10),n(22),n(1),n(30),n(393),{data:function(){var e;return e={state:!1},Object.assign(e,{promise:new Promise((function(t){return Object.assign(e,{resolve:t})}))}),{mounted:e}},mounted:function(){return this.mounted.resolve(),this.mounted.state=!0}}),x=n(397);function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(m.a)(e);if(t){var o=Object(m.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(f.a)(this,n)}}r=function(e){Object(h.a)(n,e);var t=k(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n)}(Object(v.a)(Error)),o=function(line){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return(line.length-line.trimLeft().length)/e};var w,O={mixins:[y,x.a],props:["value"],data:function(){return{chartRendered:!1,editInPlainText:!1,wasInvalid:!1,contextChanged:!1}},computed:{context:{get:function(){return this.value},set:function(e){return this.$emit("input",e)}},isValid:function(){var e;try{return this.validate(this.context),this.wasInvalid&&(this.wasInvalid=!1,this.mixpanel.track("Context fixed")),!0}catch(t){return e=t,console.error(e),this.wasInvalid||(this.wasInvalid=!0,this.mixpanel.track("Invalid context")),!1}},mermaidString:function(){var e;try{this.validate(this.context)}catch(e){return e,""}return e="mindmap\n"+this.context.replace(/[~@\-~"()]/g,(function(e){return"#".concat(e.charCodeAt(0),";")})),console.log(e),e}},mounted:function(){var script;return console.log("MindyContext mounted"),document.getElementById("mermaid-init")?console.log("mermaid-init script already exists"):(console.log("creating mermaid-init script"),(script=document.createElement("script")).id="mermaid-init",script.type="module",window.mermaidLoaded={state:!1,resolve:null},window.mermaidLoaded.promise=new Promise((function(e){return Object.assign(window.mermaidLoaded,{resolve:e})})),script.innerHTML="let resolve = null\nimport mermaid from 'https://unpkg.com/mermaid@9/dist/mermaid.esm.mjs';\nconsole.log({mermaid})\nimport mindmap from 'https://unpkg.com/@mermaid-js/mermaid-mindmap@9/dist/mermaid-mindmap.esm.mjs';\nconsole.log({mindmap})\nawait mermaid.registerExternalDiagrams([mindmap]);\nmermaid.startOnLoad = false;\nObject.assign(window, {mermaid, mindmap});\nconsole.log('mermaid loaded')\nwindow.mermaidLoaded.state = true\nwindow.mermaidLoaded.resolve()",document.head.appendChild(script),console.log(script))},watch:{mermaidString:{immediate:!0,handler:(w=Object(c.a)(regeneratorRuntime.mark((function e(t){var element,n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.chartRendered=!1,console.log("Creating mermaid chart for",t),this.mounted.state){e.next=7;break}return console.log("Waiting for the component to be mounted"),e.next=6,this.mounted.promise;case 6:console.log("Component mounted");case 7:if(window.mermaidLoaded.state){e.next=12;break}return console.log("Waiting for mermaid to be loaded"),e.next=11,window.mermaidLoaded.promise;case 11:console.log("Mermaid loaded");case 12:return element=document.getElementById("mermaid-container"),e.abrupt("return",this.$nextTick((function(){return console.log("Updating mermaid chart"),mermaid.renderAsync("mermaid-".concat(Date.now()),t,(function(svg){return element.innerHTML=svg,n.chartRendered=!0,console.log("Mermaid chart updated")}))})));case 14:case"end":return e.stop()}}),e,this)}))),function(e){return w.apply(this,arguments)})},context:function(){if(!this.contextChanged)return this.contextChanged=!0,this.mixpanel.track("Context changed")}},methods:{helloWorld:function(){return console.log("Hello world")},validate:function(e){var i,t,n,c,l;if(!e)throw new r("Context is empty");if(n=e.split("\n"),0!==o(n[0]))throw new r("The first line must not be indented");if(0===o(n[1]))throw new r("The second line must be indented");for(l=o(n[1],1),i=t=2,c=n.length;2<=c?t<c:t>c;i=2<=c?++t:--t){if(o(n[i],l)>o(n[i-1],l)+1)throw new r("Line ".concat(i+1," is indented by more than one level more than the previous line"));if(o(n[i],l)<1)throw new r("Line ".concat(i+1," is not indented; only one root topic is allowed"))}return!0}}},C=O,j=(n(413),n(68)),component=Object(j.a)(C,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-col",[n("b-row",{staticClass:"justify-content-center",attrs:{id:"mermaid-container"}}),e.isValid?e._e():n("b-alert",{staticClass:"text-left mt-3",attrs:{variant:"danger",show:""}},[n("strong",[e._v("Cannot render the mind map; please edit the context below:")]),n("ul",[n("li",[e._v("Exactly one line with no tabs in the beginning")]),n("li",[e._v("Every next line indented by the same, fewer, or just one more tab than the previous line")])])]),n("b-button",{staticClass:"btn-sm btn-light m-1",attrs:{variant:e.isValid?e.editInPlainText?"outline-success":"light":"outline-danger"},on:{click:function(t){e.editInPlainText=!e.editInPlainText,e.mixpanel.track("Switched plain text context editing "+(e.editInPlainText?"on":"off"))}}},[e._v("🖉")]),n("b-button",{staticClass:"btn-sm btn-light m-1",on:{click:function(t){return e.$emit("rebuild")}}},[e._v("↺")]),n("b-row",{directives:[{name:"show",rawName:"v-show",value:e.editInPlainText||!e.isValid,expression:"editInPlainText || !isValid"}],style:e.isValid?"":"border: 1px solid red; border-radius: 5px; padding: 10px;"},[n("EditSettings",{attrs:{title:"Edit context in plain text",value:{context:e.context},properties:{context:{type:"multiline",monospace:!0,label:"Mind map tree",placeholder:"Main topic\n\tSub-topic\n\t\tSub-sub-topic\n\tAnother sub-topic",description:"Tab/Shift-Tab to indent/unindent lines."}}},on:{input:function(t){e.context=t.context}}})],1)],1)}),[],!1,null,"29df51c8",null);t.default=component.exports;installComponents(component,{EditSettings:n(402).default})},423:function(e,t,n){"use strict";n.r(t);var r,o=n(33),c=n(35),l=n(34),d=(n(84),n(247),n(41),n(410),n(16),n(10),n(30),n(22),n(38),n(19),n(15),n(18),n(405)),h=n(393),f=n(396),m={mixins:[Object(f.a)({keys:["darkmodeEverUsed"],prefix:"mindy"})],props:{polygon:{type:d.a,required:!0},context:{default:"stuff"},usdSpent:{type:Number,required:!0}},data:function(){return{lines:[],blinkTimeout:null,getLineTimeout:null,darkmodeEverUsed:!1}},mounted:function(){return setTimeout(this.getLine,2e3*Math.random()+1e3),setTimeout(this.blink,2e3*Math.random()+1e3)},computed:{topics:function(){return this.context.split("\n").map((function(line){return line.trim().replace(/^[-*+]\s*/,"").toLowerCase()}))}},methods:{randomTopic:function(){var e;return Object(h.a)("Using topic",this.topics.length>1?(e=this.topics.slice(1),"".concat(this.topics[0]," and ").concat(e[Math.floor(Math.random()*e.length)])):this.topics[0])},getLine:(r=Object(l.a)(regeneratorRuntime.mark((function e(){var t,n,line,r,l,text,d,h;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=!!this.lines.length,l=n?"darkmode-continued":"darkmode",this.darkmodeEverUsed&&(l+="-repeated"),r=this.lines.join("”\nThen: “"),e.next=6,this.polygon.run(l,{topic:this.randomTopic(),previousLines:r},{max_tokens:50,temperature:.7,n:1,stop:["”",'"']});case 6:return d=e.sent,h=Object(c.a)(d.choices,1),text=h[0].text,t=d.approximateCost,this.$emit("update:usdSpent",this.usdSpent+t),this.darkmodeEverUsed=!0,(line=text.replace(/[”"\n].*/,"").trim())&&(this.lines=[].concat(Object(o.a)(this.lines),[line])),e.abrupt("return",this.getLineTimeout=setTimeout(this.getLine,2e3+4e3*Math.random()));case 15:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)}),blink:function(){return document.getElementById("eyes").innerText=["( 👁️ )  ( 👁️ )","(    )   (    )","(  👁️)  (  👁️)","(👁️  )  (👁️  )"][Math.floor(4*Math.random())],this.blinkTimeout=setTimeout(this.blink,1e3*Math.random()+1e3)}},beforeDestroy:function(){return clearTimeout(this.blinkTimeout),clearTimeout(this.getLineTimeout)}},v=m,y=(n(411),n(68)),component=Object(y.a)(v,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-container",{staticClass:"justify-content-center align-items-center text-center d-flex flex-column",staticStyle:{height:"100vh","background-color":"black",color:"white"},attrs:{fluid:""},on:{dblclick:function(t){return e.$emit("wheres-the-fucking-light-switch")}}},[n("b-row",[n("b-col",[n("p",{attrs:{id:"eyes"}},[e._v("( 👁️ )  ( 👁️ )")]),n("div",{staticClass:"mt-5"},e._l(e.lines,(function(line,t){return n("p",{key:t,attrs:{id:"monologue"},domProps:{textContent:e._s(line)}})})),0)])],1)],1)}),[],!1,null,"69b3316a",null);t.default=component.exports},424:function(e,t,n){"use strict";n.r(t);var r=n(34),o=(n(84),n(86)),c=n.n(o),l=n(404),d=n(397),h=n(396),f={mixins:[l.a,d.a,Object(h.a)({keys:["acknowledged"],prefix:"mindy"})],props:["value"],data:function(){return console.log("OpenAIKeyModal value: ".concat(this.value)),{openAIkey:this.value,checkingKey:!1,keyValid:!!this.value,acknowledged:!1}},computed:{canClose:function(){return this.openAIkey&&this.keyValid&&this.acknowledged}},methods:{show:function(){return this.$refs.openAIKeyModal.show()},hide:function(){return this.$refs.openAIKeyModal.hide()},checkKey:function(){var e=this;return this.try("checkingKey",Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("Checking key ".concat(e.openAIkey)),t.next=3,c.a.post("https://api.openai.com/v1/engines/text-ada-001/completions",{prompt:"Hello",max_tokens:1},{headers:{Authorization:"Bearer ".concat(e.openAIkey)}});case 3:return e.$bvToast.toast("Yay, the key is valid! Enjoy the app!",{title:"Success",variant:"success",autoHideDelay:3e3}),e.keyValid=!0,e.$emit("input",e.openAIkey),t.abrupt("return",e.mixpanel.track("OpenAI key validated"));case 7:case"end":return t.stop()}}),t)}))),{errorMessage:function(e){var t;return 401===(null!=e&&null!=(t=e.response)?t.status:void 0)&&"Invalid API key"},except:function(){return e.mixpanel.track("Error checking OpenAI key")}})}}},m=n(68),component=Object(m.a)(f,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-modal",{ref:"openAIKeyModal",attrs:{title:"Enter your OpenAI API key","hide-footer":!e.canClose,"no-close-on-backdrop":!e.canClose,"no-close-on-esc":!e.canClose,"hide-header-close":!e.canClose,"ok-only":""}},[n("h4",[e._v("Why?")]),n("p",[e._v("This app uses the OpenAI API to generate texts.\nWe "),n("a",{attrs:{href:"https://github.com/vzakharov/ideality-nuxt/blob/master/api/polygon/index.coffee",target:"_blank"}},[e._v("do not store")]),e._v("\nyour API key anywhere on our servers.")]),n("p",[e._v("You can get your OpenAI key "),n("a",{attrs:{href:"https://beta.openai.com/account/api-keys",target:"_blank"}},[e._v("here")]),e._v(".")]),n("b-form",{on:{submit:function(t){return t.preventDefault(),e.checkKey()}}},[n("b-form-group",{attrs:{label:"OpenAI API key","label-for":"openAIkey"}},[n("b-form-input",{attrs:{id:"openAIkey",type:"text",placeholder:"sk-...",disabled:e.checkingKey},model:{value:e.openAIkey,callback:function(t){e.openAIkey=t},expression:"openAIkey"}})],1),n("b-button",{attrs:{type:"submit",variant:e.keyValid?"outline-secondary":"primary",disabled:!e.openAIkey||e.checkingKey}},[n("b-spinner",{directives:[{name:"show",rawName:"v-show",value:e.checkingKey,expression:"checkingKey"}],attrs:{small:"",type:"grow"}}),e._v(e._s(e.checkingKey?"Checking...":"Check and save"))],1)],1),n("b-checkbox",{staticClass:"mt-4",staticStyle:{"font-size":"1.2rem"},model:{value:e.acknowledged,callback:function(t){e.acknowledged=t},expression:"acknowledged"}},[e._v("I understand that I will be spending my own OpenAI tokens (credits) to generate texts.")])],1)}),[],!1,null,null,null);t.default=component.exports},447:function(e,t,n){"use strict";n(420)},448:function(e,t,n){var r=n(108)(!1);r.push([e.i,"label{font-weight:700}.footer{border-top:1px solid #e7e7e7}.footer,.header{background-color:#f7f7f7}.header{border-bottom:1px solid #e7e7e7}",""]),e.exports=r},451:function(e,t,n){"use strict";n.r(t);var r,o=n(35),c=n(34),l=n(33),d=(n(84),n(85),n(110),n(15),n(18),n(16),n(1),n(3),n(134),n(19),n(403),n(10),n(22),n(38),n(30),n(249),n(41),n(86),n(415)),h=n.n(d),f=(n(425),n(2),n(173),n(393));r=function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[["createdAt","desc"]];return Object.assign(this,{items:e,root:{id:0},find:function(e){return h.a.find(this.items,{id:e})},getters:{parent:function(t){return e.find((function(i){return i.id===t.parentId}))||this.root},children:function(t){return h()(e).filter((function(e){return t?e.parentId===t.id:!e.parentId})).orderBy(n).value()},siblings:function(t){var r=this,o=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return h.a.orderBy(e.filter((function(e){return r.parent(e)===r.parent(t)&&(o||e!==t)}),n))},numSiblings:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.siblings(e,t).length},siblingIndex:function(e){return this.siblings(e).indexOf(e)},sibling:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;for(t=((t=this.siblingIndex(e))+n)%this.numSiblings(e);t<0;)t+=this.numSiblings(e);return this.siblings(e)[t]},nextSibling:function(e){return this.sibling(e,1)},prevSibling:function(e){return this.sibling(e,-1)},ancestors:function(e){return e.parentId?[this.parent(e)].concat(Object(l.a)(this.ancestors(this.parent(e)))):[]},lineage:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.includeSelf,o=void 0===r||r;return t=Object(l.a)(this.ancestors(e)).reverse(),o&&t.push(e),t[0]===this.root&&t.shift(),console.log({item:e,includeSelf:o,lineage:t}),t},heir:function(e){return Object(f.a)("Calculating heir for",e),this.children(e).length?this.heir(h.a.orderBy.apply(h.a,[this.children(e)].concat(Object(l.a)(n)))[0]):e},thread:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.lineage(t?this.heir(e):e)}},cache:{},createChild:function(t,n){return Object(f.a)({item:t},Object.assign(n,{parentId:null!=t?t.id:void 0,id:h()(e).map("id").max()+1||1,createdAt:new Date}))},clone:function(e){return this.createChild(this.parent(e),h.a.omit(e,"id","createdAt"))},delete:function(t){var n,r=this;return n=this.children(t),e.splice(e.indexOf(t),1),n.forEach((function(e){return r.delete(e)})),e}}),h.a.forEach(this.getters,(function(e,n){return t[n]=function(t){for(var path,r,o=arguments.length,c=new Array(o>1?o-1:0),l=1;l<o;l++)c[l-1]=arguments[l];return path=[null!=(r=null!=t?t.id:void 0)?r:"undefined",n,JSON.stringify(c)],h.a.has(this.cache,path)||h.a.set(this.cache,path,e.apply(this,[t].concat(c))),h.a.get(this.cache,path)}})),this};var m,v=r,y=n(396),x={mounted:function(){var e;if(window.vm){for(e=1;window["vm".concat(e)];)e++;return window["vm".concat(e)]=this}return window.vm=this}},k=n(404),w={data:function(){return{window:null}},mounted:function(){return Object.assign(this,{window:window})}},O=n(397),C=n(405),j={mixins:[Object(y.a)({keys:["user","messages","openAIkey","usdSpent","settings","chatboxCollapsed","chatboxHorizontalAnchor","fineTuningRequested"],format:"yaml",prefix:"mindy"}),x,k.a,w,O.a],head:function(){return{title:this.routedMessage?"".concat(this.routedMessage.content," · Mindy"):"Mindy · Brainstorm with AI"}},data:function(){return{fineTuningRequested:!1,chatboxCollapsed:!1,chatboxVerticalAnchor:"top",chatboxHorizontalAnchor:"left",darkmode:!1,settings:{allowFineTuning:!0,autoBuildContext:!0,numGenerations:3,temperature:.6},input:"",lastMessageTime:null,sending:!1,generatingContext:!1,generatingReply:!1,enteredName:"",checkingName:!1,editing:{message:null,input:""},nameUnavailable:!1,user:{name:"you"},messages:[],openAIkey:null,routedMessage:null,typingCount:0,typingInterval:null,usdSpent:0,bot:{name:"mindy",isBot:!0},idsBySlug:null,previousThread:null}},computed:{context:function(){var e;return null!=(e=this.routedMessage)?e.context:void 0},tree:function(){return new v(this.messages)},thread:function(){var e;return this.routedMessage?(null!=(e=this.previousThread)?e.includes(this.routedMessage):void 0)?this.previousThread:this.previousThread=this.tree.thread(this.routedMessage||this.tree.root):[]},lastMessage:function(){return h.a.last(this.thread)},polygon:function(){return new C.a({openAIkey:this.openAIkey,defaultParameters:{max_tokens:300,n:this.settings.numGenerations,temperature:this.settings.temperature}})}},mounted:function(){return this.mixpanel.track("Started"),this.openAIkey?this.$refs.input.focus():(console.log("OpenAI key not set; showing modal"),this.$refs.openAIkeyModal.show())},methods:{upvote:function(e){var t;return this.fineTuningRequested?(t=e.upvoted,this.$set(e,"upvoted",!t),e.upvoted?(this.mixpanel.track("Upvoted"),e.everUpvoted||this.polygon.upvote(e.generationId),this.$set(e,"everUpvoted",!0)):this.mixpanel.track("Unupvoted")):(this.$bvModal.show("fine-tuning-request-modal"),this.fineTuningRequested=!0,this.mixpanel.track("Fine-tuning requested"))},toggleChatboxCollapsed:function(){if(this.chatboxCollapsed=!this.chatboxCollapsed,!this.chatboxCollapsed)return this.chatboxVerticalAnchor="top",this.chatboxHorizontalAnchor="left"},rotateChatboxAnchor:function(){return"top"===this.chatboxVerticalAnchor?"left"===this.chatboxHorizontalAnchor?this.chatboxHorizontalAnchor="right":this.chatboxVerticalAnchor="bottom":"right"===this.chatboxHorizontalAnchor?this.chatboxHorizontalAnchor="left":this.chatboxVerticalAnchor="top"},addMessage:function(e){return this.messages=[].concat(Object(l.a)(this.messages),[e]),e},edit:function(e){return this.editing.message=e,this.editing.input=e.content},sendMessage:function(){var e,t,n,r=this,input=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.input,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:h.a.last(this.thread)||this.tree.root,l=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return console.log({input:input,parent:o,retrying:l}),(l?this.tree.parent(o):o)!==this.tree.root&&(e=!0,t=this.tree.lineage(o,!l).map((function(e){var t=e.user.isBot,content=e.content;return"".concat(t?"Mindy":"User",":\n").concat(content)})).join("\n\n"),console.log({previousConversation:t})),n=e?"continued":"first",this.try("sending",(function(){var e;return l?e=o:(e=r.addMessage(r.tree.createChild(o,{user:r.user,content:input})),r.input="",r.routedMessage=e,r.$nextTick((function(){var e;return null!=(e=r.$refs.scrollToBottom)?e.scrollIntoView():void 0}))),console.log({message:e}),r.$nextTick((function(){return r.try("generatingReply",Object(c.a)(regeneratorRuntime.mark((function o(){var c,l,d;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,r.polygon.run(n,{input:input,previousConversation:t},{stop:"User:",n:r.settings.temperature>0?r.settings.numGenerations:1});case 2:return d=o.sent,l=d.choices,c=d.approximateCost,d.generationId,r.usdSpent+=parseFloat(c),r.input="",console.log({message:e,choices:l}),l.forEach((function(t){var n,text=t.text,o=t.generationId;if(n=r.addMessage(r.tree.createChild(e,{user:r.bot,content:text,generationId:o})),console.log({reply:n}),r.settings.autoBuildContext)return r.mixpanel.track("Auto context triggered"),r.$nextTick((function(){return r.generateContext(n)}))})),o.abrupt("return",r.$nextTick((function(){var e;return r.routedMessage=h.a.last(r.messages),null!=(e=r.$refs.scrollToBottom)&&e.scrollIntoView(),r.focusOnInput()})));case 11:case"end":return o.stop()}}),o)}))),{mixpanelProps:{retrying:l,settings:r.settings,lineageLength:r.tree.lineage(o).length},except:function(t){return console.error(t),r.messages=h.a.without(r.messages,e),input=e.content}})}))}),{track:!1})},focusOnInput:function(){return this.$nextTick((function(){var e;return(e=new MutationObserver((function(t){var n;if(n=t.find((function(e){var t=e.attributeName,n=e.target.disabled;return"disabled"===t&&!n})))return n.target.focus(),e.disconnect()}))).observe(document.querySelector("#input"),{attributes:!0})}))},getConversation:function(e){return h.a.isArray(e)||(e=this.tree.lineage(e,{includeSelf:!0})),e.map((function(e){var t=e.user.isBot,content=e.content;return"".concat(t?"Mindy":"User",":\n").concat(content)})).join("\n\n")},generateContext:function(e){var t=this;return this.try("generatingContext",Object(c.a)(regeneratorRuntime.mark((function n(){var r,c,l,d,m,v,y,x,k,w,text,O,C;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return Object(f.a)("Generating context for",e),Object(f.a)("Previous message with context",k=h.a.findLast(t.tree.lineage(e,{includeSelf:!1}),(function(e){return e.context}))),w=(c=!!k)?"context-rebuild":"context",Object(f.a)({slug:w}),Object(f.a)("Conversation before ".concat(c?"previous context":"current message"),d=t.getConversation(k||e)),c&&(x=k.context,Object(f.a)("Messages after previous context",v=t.tree.lineage(e,{includeSelf:!0}).slice(t.tree.lineage(k,{includeSelf:!0}).length)),Object(f.a)("Conversation after previous context",l=t.getConversation(v))),n.next=9,t.polygon.run(w,{conversationBeforePreviousContext:d,previousContext:x,conversationAfterPreviousContext:l},{stop:"```",temperature:.5});case 9:return O=n.sent,C=Object(o.a)(O.choices,1),text=C[0].text,r=O.approximateCost,t.usdSpent+=parseFloat(r),m=function(line){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return(line.length-line.trimLeft().length)/e},y=function(e){var t,n;return t=(e=(e="function"==typeof e.replace?e.replace(/```[\s\S]*?/,""):void 0).trim()).trim().split("\n"),n=m(t[1],1),(t=t.map((function(line){var e;return e=m(line,n),line.replace(/^\s*/,"\t".repeat(e)).replace(/(^\s*)[-*•]\s*/,"$1")}))).join("\n")},n.abrupt("return",t.$set(e,"context",Object(f.a)("Post-processed context",y(text))));case 17:case"end":return n.stop()}}),n)}))),{except:function(e){return console.error(e)}})},cloneAndSend:function(){try{return this.sendMessage(this.editing.input,this.tree.parent(this.editing.message))}finally{this.editing.message=null}}},watch:{"settings.allowFineTuning":function(e){return e?this.mixpanel.track("Fine tuning enabled"):this.mixpanel.track("Fine tuning disabled")},"settings.autoBuildContext":function(e){return e?this.mixpanel.track("Auto context enabled"):this.mixpanel.track("Auto context disabled")},"settings.temperature":function(e){return this.mixpanel.track("Temperature changed",{temperature:e})},"settings.numGenerations":function(e){return this.mixpanel.track("Num generations changed",{numGenerations:e})},generatingReply:function(e){var t=this;return clearInterval(this.typingInterval),e?(this.$nextTick((function(){var e;return null!=(e=t.$refs.scrollToBottom)?e.scrollIntoView():void 0})),this.typingInterval=setInterval((function(){return t.typingCount=(t.typingCount+1)%3}),500)):this.typingCount=0},routedMessage:function(e){var t;if(e){if((t=e.id)===parseInt(this.$route.query.id))return;return Object(f.a)("Routing to message #".concat(t)),this.$router.push({query:{id:e.id}})}},"$route.query.id":{immediate:!0,handler:(m=Object(c.a)(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Object(f.a)("Navigating to message #".concat(t)),!t){e.next=14;break}return e.next=4,this.localLoaded;case 4:if("last"===t&&(r=h.a.last(this.messages),t=r.id),!(n=this.tree.find(parseInt(t)))){e.next=10;break}return e.abrupt("return",this.routedMessage=n);case 10:return Object(f.a)("Message #".concat(t," not found")),e.abrupt("return",this.routedMessage=null);case 12:e.next=15;break;case 14:return e.abrupt("return",this.routedMessage=null);case 15:case"end":return e.stop()}}),e,this)}))),function(e){return m.apply(this,arguments)})},usdSpent:function(e,t){if(t)return this.mixpanel.track("USD spent",{total:e,delta:e-t})}}},_=j,I=(n(447),n(68)),component=Object(I.a)(_,(function(){var e,t=this,n=t.$createElement,r=t._self._c||n;return t.darkmode?r("DarkMode",t._b({attrs:{usdSpent:t.usdSpent},on:{"update:usdSpent":function(e){t.usdSpent=e},"update:usd-spent":function(e){t.usdSpent=e},"wheres-the-fucking-light-switch":function(e){t.darkmode=!1,t.mixpanel.track("Dark mode off")}}},"DarkMode",{polygon:t.polygon,context:t.context},!1)):r("div",[r("b-container",{staticClass:"p-5 vh-100",attrs:{fluid:""}},[r("b-row",{staticStyle:{height:"calc(100vh - 50px)"},attrs:{"align-v":"center"}},[r("b-col",{staticClass:"p-0",style:t.chatboxCollapsed?(e={position:"fixed"},e[t.chatboxVerticalAnchor]="top"===t.chatboxVerticalAnchor?"10px":"60px",e[t.chatboxHorizontalAnchor]="10px",e.width="64px",e.boxShadow="0 0 10px 0 rgba(0, 0, 0, 0.5)",e.zIndex=1e3,e):{height:"calc(100vh - 50px)"}},[t.messages?[r("div",{staticClass:"header text-center border-top border-right border-left",staticStyle:{cursor:"pointer"},on:{click:t.toggleChatboxCollapsed}},[t.chatboxCollapsed?[r("p",{staticClass:"mt-3 lead",staticStyle:{"font-size":"1rem",cursor:"pointer"}},[t._v("💬")])]:r("div",[r("h1",{staticClass:"mb-0 display-3",staticStyle:{"font-size":"3rem"}},[t._v("Mindy")]),r("p",{staticClass:"lead",staticStyle:{"font-size":"1rem"}},[t._v("Brainstorm with AI")])])],2),t.chatboxCollapsed?t._e():r("div",{staticClass:"border-right border-left",style:{height:t.chatboxCollapsed?"150px":"calc(100vh - 400px)",overflowY:"scroll",fontSize:t.chatboxCollapsed?"0.75em":"1em"},attrs:{id:"messages"}},[t._l(t.thread,(function(e,n){return r("div",{key:n,staticClass:"pt-4 p-2",style:{"background-color":n%2?"#f7f7f7":"#fff",border:e===t.routedMessage&&e!==t.lastMessage?"1px solid #ccc":"none",cursor:e!==t.routedMessage&&e.user.isBot?"pointer":"default"},on:{click:function(){e!==t.routedMessage&&e.user.isBot&&(t.routedMessage=e)}}},[e.special?[r("em",[r("strong",[t._v(t._s(e.user.name)+" "+t._s(e.content))])])]:t._e(),t.tree.numSiblings(e)>1?[r("div",{staticStyle:{"font-size":"0.8em",color:"#aaa",float:"right"}},[r("nuxt-link",{staticClass:"mr-1",staticStyle:{color:"inherit"},attrs:{to:{query:{id:t.tree.sibling(e,-1).id}}},domProps:{textContent:t._s("< "+(t.tree.siblingIndex(e)+1))}}),t._v("/"),r("nuxt-link",{staticClass:"ml-1",staticStyle:{color:"inherit"},attrs:{to:{query:{id:t.tree.sibling(e,1).id}}},domProps:{textContent:t._s(t.tree.numSiblings(e)+" >")}})],1)]:t._e(),e.user.name!==t.user.name||t.editing.message?t._e():[r("a",{class:{"mr-1":t.tree.numSiblings(e)>1},staticStyle:{"font-size":"0.8em",color:"#aaa",float:"right",cursor:"pointer"},domProps:{textContent:t._s("🖉")},on:{click:function(n){return t.edit(e)}}})],r("div",{class:{"text-primary":t.user&&e.user.name===t.user.name},style:{fontWeight:"bold"},domProps:{textContent:t._s(e.user.name)}}),t.editing.message!==e?r("div",{domProps:{innerHTML:t._s(t.$md.render(e.content))},on:{dblclick:function(n){return t.edit(e)}}}):r("div",[r("b-textarea",{attrs:{rows:"3","max-rows":"10"},on:{keydown:[function(n){return!n.type.indexOf("key")&&t._k(n.keyCode,"enter",13,n.key,"Enter")||n.ctrlKey||n.shiftKey||n.altKey||n.metaKey?null:(n.preventDefault(),function(){e.user.isBot||t.cloneAndSend()}.apply(null,arguments))},function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"]))return null;t.editing.message=null}]},model:{value:t.editing.input,callback:function(e){t.$set(t.editing,"input",e)},expression:"editing.input"}}),e.user.isBot?t._e():r("b-button",{staticClass:"m-1",attrs:{size:"sm",variant:"primary"},on:{click:t.cloneAndSend}},[t._v("Save & submit")]),r("b-button",{staticClass:"m-1",attrs:{size:"sm",variant:e.user.isBot?"primary":"outline-secondary"},on:{click:function(n){e.content=t.editing.input,t.editing.message=null}}},[t._v(t._s(e.user.isBot?"Save":"Just save"))]),r("b-button",{staticClass:"m-1",attrs:{variant:"outline-secondary",size:"sm"},on:{click:function(e){t.editing.message=null}}},[t._v("Cancel")]),r("b-button",{staticClass:"m-1",attrs:{variant:"outline-danger",size:"sm"},on:{click:function(n){t.window.confirm("Are you sure you want to delete this message and all of its further replies? THERE IS NO UNDO!")&&(t.messages=t.tree.delete(e),t.routedMessage=t.tree.parent(e),t.editing.message=null)}}},[t._v("Delete")])],1),e===t.routedMessage?[t.generatingReply?r("div",{staticClass:"p-2 text-muted"},[r("em",[t._v("mindy is thinking"+t._s(".".repeat(t.typingCount+1)))])]):t._e(),e.user.isBot?r("div",{staticClass:"p-2 text-center"},[r("b-button",{staticClass:"mx-1",attrs:{variant:"outline-secondary",disabled:t.sending||t.generatingReply,size:t.chatboxCollapsed?"sm":"md"},on:{click:function(n){t.sendMessage(t.tree.parent(e).content,t.tree.parent(e),!0)}}},[t._v("↺ Try again")]),r("b-button",{staticClass:"mx-1 float-right",style:e.upvoted?{}:{filter:"grayscale(100%)"},attrs:{variant:"light",size:t.chatboxCollapsed?"sm":"md"},on:{click:function(n){return t.upvote(e)}}},[t._v("👍")]),r("b-modal",{attrs:{id:"fine-tuning-request-modal",title:"Can we fine-tune Mindy based on your upvotes?","hide-footer":"",centered:""}},[r("p",[r("strong",[t._v("If you upvote a reply, we will send it to our servers and “train” Mindy to generate more replies like this one. ")]),t._v("This will also include the entire conversation thread, so that Mindy can understand the context.")]),r("p",[t._v("In the long run, we hope this will help Mindy generate better replies, and make you a happier user, too.")]),r("p",[t._v("So we will be grateful if you keep this switch on. :)")]),r("p",[t._v("(You can always turn this off in the settings.)")]),r("b-checkbox",{staticClass:"my-4",attrs:{switch:""},model:{value:t.settings.allowFineTuning,callback:function(e){t.$set(t.settings,"allowFineTuning",e)},expression:"settings.allowFineTuning"}},[t._v(t._s(t.settings.allowFineTuning?"Yes, ":"No, don’t ")+"send my upvotes to your servers to make Mindy better.")]),r("p",[t._v("Now let’s upvote that message!")]),r("b-button",{attrs:{variant:"primary",size:"lg"},on:{click:function(n){t.upvote(e),t.$bvModal.hide("fine-tuning-request-modal")}}},[t._v("👍 "+t._s(t.settings.allowFineTuning?"Upvote and send to servers":"Just upvote"))])],1)],1):t._e()]:t._e()],2)})),r("div",{ref:"scrollToBottom",attrs:{id:"scrollToBottom"}})],2),t.chatboxCollapsed?t._e():r("div",{staticClass:"footer p-2 border-bottom border-right border-left"},[t.user.name?t._e():[r("b-form-group",{attrs:{label:"Name","label-for":"username"}},[r("b-form-input",{attrs:{id:"username",value:t.enteredName,placeholder:"Enter your name to start chatting"},on:{input:function(e){t.enteredName=e.toLowerCase().replace(/[^a-z0-9-]+/g,"-").replace(/-+/g,"-")},change:function(e){t.user.name=t.enteredName}}})],1)],r("b-form",{staticClass:"mb-0",on:{submit:function(e){return e.preventDefault(),t.sendMessage()}}},[r("b-form-group",{attrs:{label:t.user&&t.user.name,"label-for":"input"}},[r("b-textarea",{ref:"input",attrs:{id:"input",placeholder:"Enter to send, Shift+Enter for new line",disabled:!t.user||t.sending||t.generatingReply},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")||e.ctrlKey||e.shiftKey||e.altKey||e.metaKey?null:(e.preventDefault(),void(t.user&&t.input&&!t.sending&&!t.generatingReply&&t.sendMessage()))}},model:{value:t.input,callback:function(e){t.input=e},expression:"input"}})],1),r("b-button",{attrs:{type:"submit",variant:t.sending?"outline-secondary":"primary",disabled:!t.input||t.sending||t.generatingReply}},[t._v(t._s(t.sending?"Sending...":"Send")),t.sending?r("b-spinner",{attrs:{small:""}}):t._e()],1)],1)],2)]:r("b-spinner")],2),r("b-col",{class:t.chatboxCollapsed?"col-12":"col-md-8 col-sm-10 col-12"},[r("b-row",{staticClass:"justify-content-center text-center"},[t.routedMessage?[r("MindyContext",{directives:[{name:"show",rawName:"v-show",value:!!t.routedMessage.context&&!t.generatingContext,expression:"!!routedMessage.context && !generatingContext"}],key:t.routedMessage.id,on:{rebuild:function(e){return t.generateContext(t.routedMessage)}},model:{value:t.routedMessage.context,callback:function(e){t.$set(t.routedMessage,"context",e)},expression:"routedMessage.context"}}),t.routedMessage.context?t._e():r("b-button",{staticClass:"mx-1",attrs:{disabled:t.sending||t.generatingReply||t.generatingContext,variant:t.generatingReply||t.generatingContext?"light":"outline-primary"},on:{click:function(e){return t.generateContext(t.routedMessage)}}},[t._v("丫 "+t._s(t.generatingContext?"Building mindmap...":t.generatingReply&&t.settings.autoBuildContext?"A little patience...":"Build mindmap"))])]:r("div",{staticClass:"lead"},[r("p",[t._v("Ask Mindy a question, and watch the magic unfold!")])])],2)],1)],1),r("OpenAIKeyModal",{ref:"openAIkeyModal",model:{value:t.openAIkey,callback:function(e){t.openAIkey=e},expression:"openAIkey"}}),r("div",{staticClass:"footer p-2 border-top border-right border-left fixed-bottom"},[r("div",{staticClass:"float-right text-right text-muted px-2"},[r("a",{staticStyle:{"text-decoration":"none"},attrs:{href:"https://vzakharov.github.io/buy-me-a-beer/",target:"_blank",title:"Buy me a beer!"},on:{click:function(e){return t.mixpanel.track("Cheers! 🍺")}}},[t._v("🍺")])]),r("div",{staticClass:"float-right text-right text-muted px-2",staticStyle:{cursor:"pointer",position:"fixed",top:"5px",right:"5px","z-index":"9999"},attrs:{title:"Dark mode"},on:{click:function(e){t.mixpanel.track("Dark mode on"),t.darkmode=!0}}},[t._v("☾")]),r("div",{staticClass:"float-right text-right text-muted px-2",staticStyle:{cursor:"pointer"},attrs:{title:"Change OpenAI key"},on:{click:function(e){return t.$refs.openAIkeyModal.show()}}},[t._v(t._s(t.openAIkey?"🔑 sk-..."+t.openAIkey.slice(-4):"🔑 No OpenAI key"))]),r("div",{staticClass:"float-right text-right text-muted px-2",staticStyle:{cursor:"not-allowed"},attrs:{title:"Approximate USD spent on OpenAI API calls. Click to clear."},on:{click:function(){t.window.confirm("Are you sure you want to clear the cost counter?")&&(t.usdSpent=0)}}},[t._v("💸 ~$"+t._s(parseFloat(t.usdSpent).toFixed(2)))]),r("span",{staticClass:"float-left text-right px-2",class:t.settings.autoBuildContext?"text-success":"text-muted",staticStyle:{cursor:"pointer"},attrs:{title:"Auto-build mindmap is "+(t.settings.autoBuildContext?"on":"off")},on:{click:function(e){t.settings.autoBuildContext=!t.settings.autoBuildContext}}},[t._v("丫")]),r("span",{staticClass:"float-left text-right text-muted px-2",staticStyle:{cursor:"pointer"},attrs:{title:"Mindy will generate "+t.settings.numGenerations+" "+(1===t.settings.numGenerations?"reply":"replies")+" at once"},on:{click:function(e){t.settings.numGenerations=t.settings.numGenerations%3+1}}},[t._v("💬 × "+t._s(t.settings.numGenerations))]),r("span",{staticClass:"float-left text-right text-muted px-2",staticStyle:{cursor:"pointer"},attrs:{title:"Mindy will generate replies with a temperature (i.e. “creativity”) of "+t.settings.temperature},on:{click:function(e){t.settings.temperature=Math.floor(10*(t.settings.temperature+.2))/10%1.2}}},[t._v(" "+t._s(0==t.settings.temperature?"🥱":t.settings.temperature<=.2?"😐":t.settings.temperature<=.4?"🤔":t.settings.temperature<=.6?"😉":t.settings.temperature<=.8?"😜":"🤪")+"\nt="+t._s(Math.round(10*t.settings.temperature)/10))]),r("div",{staticClass:"float-left text-right text-muted px-2",staticStyle:{cursor:"pointer"},attrs:{title:"Edit settings"},on:{click:function(e){return t.$bvModal.show("settings-modal")}}},[t._v("...")]),r("b-modal",{attrs:{id:"settings-modal",title:"Settings","hide-footer":"","hide-header":"",centered:""}},[r("EditSettings",{attrs:{properties:{autoBuildContext:{label:"Auto-build mindmap",description:{true:"Mindy will automatically build a mindmap whenever you navigate to a reply.",false:'You will have to click the "Mindmap" button to build a mindmap.'}},numGenerations:{label:"Number of replies at once",description:"How many replies to generate at once. Increasing this helps explore more options, but also costs more."},temperature:{label:"Temperature",description:"How creative to be. 0 gives deterministic (same) replies, 1 gets... weird. Note that for 0 the number of replies is always 1."},allowFineTuning:{label:"Allow fine-tuning",description:{true:"Mindy will be sending your upvoted replies to our servers to fine-tune her. This helps her generate better replies, and makes you a happier user, too.",false:"Mindy will not be sending your upvoted replies to our servers."}}}},model:{value:t.settings,callback:function(e){t.settings=e},expression:"settings"}})],1)],1)],1)],1)}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{DarkMode:n(423).default,MindyContext:n(422).default,OpenAIKeyModal:n(424).default,EditSettings:n(402).default})}}]);