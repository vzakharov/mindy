(window.webpackJsonp=window.webpackJsonp||[]).push([[27,6,7,8,14,21,30],{393:function(t,e,n){"use strict";var r,o,c,l=n(33);n(1);o=!1,r=function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.args,r=e.callback,c=e.method,d=void 0===c?"debug":c;o||((t=console)[d].apply(t,Object(l.a)(n)),"function"==typeof r&&r());return n[n.length-1]},c=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return r({args:e})},c.breakpoint=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return r({args:e,callback:function(){}})},["log","warn","debug","error"].forEach((function(t){return c[t]=function(){for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return r({args:n,method:t})}})),c.disable=function(){return o=!0},e.a=c},395:function(t,e){let n;const r=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];e.getSymbolSize=function(t){if(!t)throw new Error('"version" cannot be null or undefined');if(t<1||t>40)throw new Error('"version" should be in range from 1 to 40');return 4*t+17},e.getSymbolTotalCodewords=function(t){return r[t]},e.getBCHDigit=function(data){let t=0;for(;0!==data;)t++,data>>>=1;return t},e.setToSJISFunction=function(t){if("function"!=typeof t)throw new Error('"toSJISFunc" is not a valid function.');n=t},e.isKanjiModeEnabled=function(){return void 0!==n},e.toSJIS=function(t){return n(t)}},396:function(t,e,n){const r=n(410),o=n(411);e.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},e.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},e.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},e.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},e.MIXED={bit:-1},e.getCharCountIndicator=function(t,e){if(!t.ccBits)throw new Error("Invalid mode: "+t);if(!r.isValid(e))throw new Error("Invalid version: "+e);return e>=1&&e<10?t.ccBits[0]:e<27?t.ccBits[1]:t.ccBits[2]},e.getBestModeForData=function(t){return o.testNumeric(t)?e.NUMERIC:o.testAlphanumeric(t)?e.ALPHANUMERIC:o.testKanji(t)?e.KANJI:e.BYTE},e.toString=function(t){if(t&&t.id)return t.id;throw new Error("Invalid mode")},e.isValid=function(t){return t&&t.bit&&t.ccBits},e.from=function(t,n){if(e.isValid(t))return t;try{return function(t){if("string"!=typeof t)throw new Error("Param is not a string");switch(t.toLowerCase()){case"numeric":return e.NUMERIC;case"alphanumeric":return e.ALPHANUMERIC;case"kanji":return e.KANJI;case"byte":return e.BYTE;default:throw new Error("Unknown mode: "+t)}}(t)}catch(t){return n}}},397:function(t,e,n){"use strict";var r,o=n(0);n(15),n(24);r=function(t){return t},e.a=function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=n.deep,l=n.save,d=void 0===l?r:l,h=n.load,f=void 0===h?r:h;return{data:function(){var e;if(null==this.$options.propsData.value)throw new Error("Component ".concat(this.$options.name," requires a `value` prop. Make sure to use :value or v-model in the parent component to represent `").concat(t,"`."));return e={},Object(o.a)(e,t,null),Object(o.a)(e,"syncValue",{watchers:[]}),e},watch:(e={},Object(o.a)(e,t,{deep:c,handler:function(t){return this.$emit("input",d.call(this,t))}}),Object(o.a)(e,"value",{deep:c,immediate:!0,handler:function(e){return this[t]=f.call(this,e)}}),e)}}},399:function(t,e,n){"use strict";var r,o=n(0),c=n(34),l=(n(84),n(1),n(15),n(5),n(4),n(2),n(6),n(3),n(7),n(394)),d=n.n(l);function h(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function f(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?h(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):h(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}e.a={data:function(){return{busy:{},whilst:{}}},methods:{actionPromise:function(t){return d.a.get(this.whilst,t,Promise.resolve())},try:(r=Object(c.a)(regeneratorRuntime.mark((function t(e,n){var r,o,c,l,h,track,m,v,y,x,w,k,C=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=C.length>2&&void 0!==C[2]?C[2]:{},o=r.oneAtATime,c=r.errorMessage,l=r.except,h=r.track,track=void 0===h||h,m=r.mixpanelProps,!o||!d.a.get(this.whilst,e)){t.next=4;break}return console.warn("Already ".concat(e,"; skipping")),t.abrupt("return",d.a.get(this.whilst,e));case 4:return track&&(y=this.mixpanel),this.$set(this.busy,e,!0),w=null,x=null,d.a.set(this.whilst,e,new Promise((function(t,e){return w=t,x=e}))),t.prev=9,console.log("Started ".concat(e)),null!=y&&y.track("".concat(e," started"),m),t.t0=w,t.next=15,n.call(this);case 15:return t.t1=k=t.sent,(0,t.t0)(t.t1),null!=y&&y.track("".concat(e," succeeded"),m),t.abrupt("return",k);case 21:return t.prev=21,t.t2=t.catch(9),v=t.t2,console.error("Error while ".concat(e,": ").concat(v)),null!=y&&y.track("".concat(e," failed"),f({error:v.message},m)),"function"==typeof c&&(c=c(v)),this.alert(c),"function"==typeof l&&l(v),t.abrupt("return",x(v));case 30:return t.prev=30,this.$set(this.busy,e,!1),d.a.unset(this.whilst,e),console.log("Finished ".concat(e)),t.finish(30);case 35:case"end":return t.stop()}}),t,this,[[9,21,30,35]])}))),function(t,e){return r.apply(this,arguments)}),alert:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Something went wrong.";return this.$bvToast.toast("See console for error details.",{title:t,variant:"danger",solid:!0,autoHideDelay:5e3})}}}},400:function(t,e){e.L={bit:1},e.M={bit:0},e.Q={bit:3},e.H={bit:2},e.isValid=function(t){return t&&void 0!==t.bit&&t.bit>=0&&t.bit<4},e.from=function(t,n){if(e.isValid(t))return t;try{return function(t){if("string"!=typeof t)throw new Error("Param is not a string");switch(t.toLowerCase()){case"l":case"low":return e.L;case"m":case"medium":return e.M;case"q":case"quartile":return e.Q;case"h":case"high":return e.H;default:throw new Error("Unknown EC Level: "+t)}}(t)}catch(t){return n}}},401:function(t,e,n){"use strict";var r=n(451),o=n.n(r);e.a={data:function(){return o.a.init("f9ed5012981005142ed33251c919eb41",{debug:!0}),{mixpanel:o.a}}}},407:function(t,e,n){"use strict";var r=n(0),o=n(35),c=n(40),l=(n(1),n(51),n(18),n(2),n(16),n(3),n(15),n(5),n(4),n(6),n(7),n(417)),d=n(393),h=n(394),f=n.n(h);function m(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function v(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?m(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):m(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}e.a=function(){var t,e,n,h,m,y,x,w=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},k=w.prefix,C=w.keys,O=w.format,A=void 0===O?"json":O;return"yaml"===A?(m=l.a.load,n=l.a.dump):(m=JSON.parse,n=JSON.stringify),x=null,t=function(t,e){return"object"===Object(c.a)(e)&&null!==e?m(t||null):"number"==typeof e?parseFloat(t||null):"boolean"==typeof e?"boolean"==typeof t?t:"true"===t:t||null},y=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.filter(f.a.identity).join(".")},e=C.reduce((function(t,e){var n;if(f.a.isArray(e)){var c=e,l=Object(o.a)(c,2);e=l[0],n=l[1].dataPath}return Object.assign(t,Object(r.a)({},e,y(n,e)))}),{}),C=C.map((function(t){return f.a.isArray(t)?t[0]:t})),h=C.reduce((function(t,e){return Object.assign(t,Object(r.a)({},e,y(k,e)))}),{}),{data:function(){return{syncLocal:{promise:new Promise((function(t){return x=t})),values:null,loaded:!1,ignoreWatchers:[]}}},mounted:function(){var n=this;return C.forEach((function(r){var o,c,l;if(l=window.localStorage.getItem(h[r]),o=e[r],void 0===(c=f.a.get(n,o)))throw new Error("Default value for key `".concat(r,"` does not exist at `").concat(o,"`"));return l=t(l,c),f.a.set(n,o,Object(d.a)("Setting ".concat(r," at ").concat(o," to:"),f.a.isObject(c)&&!f.a.isArray(c)?v(v({},c),l):l||c))})),this.$nextTick((function(){return Object.assign(n.syncLocal,{values:f.a.mapValues(e,(function(t){return f.a.get(n,t)})),loaded:!0}),x(n.syncLocal.values)}))},watch:v({},C.reduce((function(t,e){return Object.assign(t,Object(r.a)({},e,{deep:!0,handler:function(t){var r;return this.syncLocal.loaded?(r=h[e],window.localStorage.setItem(r,"object"===Object(c.a)(t)?n(t):t),this.syncLocal.ignoreWatchers=f.a.without(this.syncLocal.ignoreWatchers,e)):this.syncLocal.ignoreWatchers.push(e)}}))}),{}))}}},409:function(t,e,n){const r=n(400),o=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],c=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];e.getBlocksCount=function(t,e){switch(e){case r.L:return o[4*(t-1)+0];case r.M:return o[4*(t-1)+1];case r.Q:return o[4*(t-1)+2];case r.H:return o[4*(t-1)+3];default:return}},e.getTotalCodewordsCount=function(t,e){switch(e){case r.L:return c[4*(t-1)+0];case r.M:return c[4*(t-1)+1];case r.Q:return c[4*(t-1)+2];case r.H:return c[4*(t-1)+3];default:return}}},410:function(t,e){e.isValid=function(t){return!isNaN(t)&&t>=1&&t<=40}},411:function(t,e){const n="[0-9]+";let r="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";r=r.replace(/u/g,"\\u");const o="(?:(?![A-Z0-9 $%*+\\-./:]|"+r+")(?:.|[\r\n]))+";e.KANJI=new RegExp(r,"g"),e.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),e.BYTE=new RegExp(o,"g"),e.NUMERIC=new RegExp(n,"g"),e.ALPHANUMERIC=new RegExp("[A-Z $%*+\\-./:]+","g");const c=new RegExp("^"+r+"$"),l=new RegExp("^[0-9]+$"),d=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");e.testKanji=function(t){return c.test(t)},e.testNumeric=function(t){return l.test(t)},e.testAlphanumeric=function(t){return d.test(t)}},412:function(t,e){function n(t){if("number"==typeof t&&(t=t.toString()),"string"!=typeof t)throw new Error("Color should be defined as hex string");let e=t.slice().replace("#","").split("");if(e.length<3||5===e.length||e.length>8)throw new Error("Invalid hex color: "+t);3!==e.length&&4!==e.length||(e=Array.prototype.concat.apply([],e.map((function(t){return[t,t]})))),6===e.length&&e.push("F","F");const n=parseInt(e.join(""),16);return{r:n>>24&255,g:n>>16&255,b:n>>8&255,a:255&n,hex:"#"+e.slice(0,6).join("")}}e.getOptions=function(t){t||(t={}),t.color||(t.color={});const e=void 0===t.margin||null===t.margin||t.margin<0?4:t.margin,r=t.width&&t.width>=21?t.width:void 0,o=t.scale||4;return{width:r,scale:r?4:o,margin:e,color:{dark:n(t.color.dark||"#000000ff"),light:n(t.color.light||"#ffffffff")},type:t.type,rendererOpts:t.rendererOpts||{}}},e.getScale=function(t,e){return e.width&&e.width>=t+2*e.margin?e.width/(t+2*e.margin):e.scale},e.getImageWidth=function(t,n){const r=e.getScale(t,n);return Math.floor((t+2*n.margin)*r)},e.qrToImageData=function(t,n,r){const o=n.modules.size,data=n.modules.data,c=e.getScale(o,r),l=Math.floor((o+2*r.margin)*c),d=r.margin*c,h=[r.color.light,r.color.dark];for(let i=0;i<l;i++)for(let e=0;e<l;e++){let n=4*(i*l+e),f=r.color.light;if(i>=d&&e>=d&&i<l-d&&e<l-d){f=h[data[Math.floor((i-d)/c)*o+Math.floor((e-d)/c)]?1:0]}t[n++]=f.r,t[n++]=f.g,t[n++]=f.b,t[n]=f.a}}},413:function(t,e,n){"use strict";(function(t){n(5),n(4),n(2),n(1),n(6),n(3),n(7);var r=n(34),o=n(0),c=(n(84),n(87)),l=n.n(c),d=n(394),h=n.n(d),f=n(393);function m(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function v(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?m(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):m(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}e.a=function(){var e,n,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},c=o.polygonAPIurl,d=void 0===c?"https://ideality.app/api/polygon":c,m=o.templatesDatabaseId,y=void 0===m?"485b3bd6b4524c1dbd9ef2acc5bccfbf":m,x=o.upvotesDatabaseId,w=void 0===x?"ecdca719f95b4eeab4c86118e44d162c":x,k=o.openAIkey,C=void 0===k?t.env.OPENAI_KEY:k,O=o.defaultParameters,A=void 0===O?{}:O,I=o.spent,M=o.vm,E=o.vmKey;return e=l.a.create({baseURL:d}),console.log("Polygon client initialized",{polygonAPIurl:d,templatesDatabaseId:y,upvotesDatabaseId:w,openAIkey:C,defaultParameters:A}),{spent:I,run:function(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return console.log("Running",t,{variables:r,parameters:o}),e.post("/run",{databaseId:y,slug:t,openAIkey:C,variables:r,parameters:v(v({},A),o)}).then((function(t){var data=t.data;return Object(f.a)("USD spent",n.spent+=data.approximateCost),M&&(M[E]=n.spent),data}))},generate:(n=Object(r.a)(regeneratorRuntime.mark((function t(n,input){var data,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("Generating",n,input),h.a.isArray(n)||(n=[n]),t.next=4,e.post("/generate",{outputKeys:n,input:input,openAIkey:C});case 4:return r=t.sent,data=r.data,t.abrupt("return",Object(f.a)("Generated:",data));case 7:case"end":return t.stop()}}),t)}))),function(t,e){return n.apply(this,arguments)}),upvote:function(t){return console.log("Upvoting",t),e.post("/upvote",{databaseId:w,generationId:t}).then((function(t){return t.data}))}}}}).call(this,n(135))},414:function(t,e,n){"use strict";var r,o=n(33),c=(n(133),n(1),n(2),n(15),n(426),n(427),n(16),n(171),n(3),n(394)),l=n.n(c),d=n(393);r=function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.childOrder,c=void 0===r?[["createdAt","desc"]]:r,h=n.vm;return Object.assign(this,{items:t,root:{id:0},find:function(t){return l.a.find(this.items,{id:t})},getters:{parent:function(e){return t.find((function(i){return i.id===e.parentId}))||this.root},children:function(e){return l()(t).filter((function(t){return(null!=e?e.id:void 0)?t.parentId===e.id:!t.parentId})).orderBy(c).value()},hasChildren:function(t){return this.children(t).length>0},orphans:function(){return this.children(this.root)},descendants:function(t){var e=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return[].concat(Object(o.a)(n?[t]:[]),Object(o.a)(l.a.flatMap(this.children(t),(function(t){return e.descendants(t)}))))},siblings:function(e){var n=this,r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return l.a.orderBy(t.filter((function(t){return n.parent(t)===n.parent(e)&&(r||t!==e)}),c))},numSiblings:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.siblings(t,e).length},siblingIndex:function(t){return this.siblings(t).indexOf(t)},sibling:function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;for(e=((e=this.siblingIndex(t))+n)%this.numSiblings(t);e<0;)e+=this.numSiblings(t);return this.siblings(t)[e]},nextSibling:function(t){return this.sibling(t,1)},prevSibling:function(t){return this.sibling(t,-1)},ancestors:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.breakAt;return(null!=t?t.parentId:void 0)&&t.parentId!==(null!=n?n.id:void 0)?[this.parent(t)].concat(Object(o.a)(this.ancestors(this.parent(t),{breakAt:n}))):[]},lineage:function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.includeSelf,c=void 0===r||r,l=n.breakAt;return e=Object(o.a)(this.ancestors(t,{breakAt:l})).reverse(),c&&t&&e.push(t),(null!=e?e[0]:void 0)===this.root&&e.shift(),e},heir:function(t){var e,n,r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=o.nested;return e=this.children(t),t&&e.length?(n=e[null!=(r=t.heirIndex)?r:0],c?this.heir(n,{nested:!0}):void 0):t},thread:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(t)return this.lineage(e?this.heir(t,{nested:!0}):t)},heritage:function(t){var e,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=r.includeSelf,c=void 0===o||o;return n=this.thread(t),e=this.lineage(t,{includeSelf:!c}),l.a.difference(n,e)}},cache:{},createChild:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(d.a)({item:e},Object.assign(n,{parentId:null!=e?e.id:void 0,id:l()(t).map("id").max()+1||1,createdAt:new Date}))},clone:function(t){return this.createChild(this.parent(t),l.a.omit(t,"id","createdAt"))},delete:function(e){var n,r=this;return n=this.children(e),t.splice(t.indexOf(e),1),n.forEach((function(t){return r.delete(t)})),t},nudge:function(t){var e,n;if(n=this.parent(t))return Object(d.a)("Nudging item ".concat(t.id," to be the heir of its parent ").concat(n.id),e=this.siblingIndex(t)),h?h.$set(n,"heirIndex",e):l.a.assign(n,{heirIndex:e})}}),l.a.forEach(this.getters,(function(t,n){return e[n]=function(e){for(var path,r,o=arguments.length,c=new Array(o>1?o-1:0),d=1;d<o;d++)c[d-1]=arguments[d];return path=[null!=(r=null!=e?e.id:void 0)?r:"undefined",n,JSON.stringify(c)],l.a.has(this.cache,path)||l.a.set(this.cache,path,t.apply(this,[e].concat(c))),l.a.get(this.cache,path)}})),this},e.a=r},418:function(t,e,n){"use strict";var r=n(8),o=n(111),c=n(48),l=n(69),d=r.TypeError,h=function(t,e,source,n,r,f,m,v){for(var element,y,x=r,w=0,k=!!m&&l(m,v);w<n;){if(w in source){if(element=k?k(source[w],w,e):source[w],f>0&&o(element))y=c(element),x=h(t,e,element,y,x,f-1)-1;else{if(x>=9007199254740991)throw d("Exceed the acceptable array length");t[x]=element}x++}w++}return x};t.exports=h},422:function(t,e,n){"use strict";n.r(e);var r,o=n(40),c=(n(248),n(15),n(19),n(1),n(37),n(4),n(63),n(11),n(30),n(22),n(397));r=function(t){return"number"===this.inputProps.type?Number(t):t};var l={mixins:[Object(c.a)("setting",{save:r,load:r})],props:{value:{required:!0},properties:{type:Object,default:function(){return{}}}},computed:{id:function(){return"edit-settings-input-".concat(this.$vnode.key,"-").concat(Math.random().toString(36).slice(2))},label:function(){return this.properties.label||this.$vnode.key},description:function(){var t;return t=this.properties.description,(null!=t?t[!0]:void 0)&&t[!1]?t[this.setting]:t},inputTagAndProps:function(){var t,e,n=this;if(e={multiline:function(){var t;return{tag:"b-textarea",props:{rows:Math.max(10,Math.min(20,null!=(t=n.value)?t.split("\n").length:void 0)),style:n.properties.monospace?"font-family: monospace; tab-size: 2; -moz-tab-size: 2;":"",placeholder:n.properties.placeholder||"Enter text here"}}},text:{tag:"b-input",props:{type:"text",placeholder:this.properties.placeholder||"Enter text here"}},number:{tag:"b-input",props:{type:"number",placeholder:this.properties.placeholder||"Enter a number here"}},boolean:{tag:"b-checkbox",props:{switch:!0}}},this.properties.type)return("function"==typeof(t=e[this.properties.type])?t():void 0)||t;switch(Object(o.a)(this.value)){case"number":return e.number;case"boolean":return e.boolean;default:return e.text}},inputTag:function(){return this.inputTagAndProps.tag},inputProps:function(){return this.inputTagAndProps.props}},methods:{onTab:function(t){var e,n,r,o,c,l,d=this;if(this.properties.monospace){var h=this.$refs.input.$el;return o=h.selectionStart,r=h.selectionEnd,l=this.value.substring(0,o),n=this.value.substring(o,r),c=this.value.substring(r),e=l.lastIndexOf("\n")||0,n=l.substring(e+1,o)+n,l=l.substring(0,e+1),n=n.replace(/(\n|^)(\t?)/g,t.shiftKey?"$1":"$1$2\t"),this.setting=l+n+c,t.preventDefault(),this.$nextTick((function(){return d.$refs.input.$el.setSelectionRange(o+(t.shiftKey?-1:1),r+(t.shiftKey?-1:1))}))}}}},d=n(68),component=Object(d.a)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-form-group",t._b({attrs:{"label-for":t.id}},"b-form-group",{label:t.label,description:t.description},!1),[n(t.inputTag,t._b({ref:"input",tag:"component",attrs:{id:t.id},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"tab",9,e.key,"Tab")?null:t.onTab.apply(null,arguments)}},model:{value:t.setting,callback:function(e){t.setting=e},expression:"setting"}},"component",t.inputProps,!1))],1)}),[],!1,null,null,null);e.default=component.exports},426:function(t,e,n){"use strict";var r=n(12),o=n(418),c=n(53),l=n(42),d=n(48),h=n(134);r({target:"Array",proto:!0},{flatMap:function(t){var e,n=l(this),r=d(n);return c(t),(e=h(n,0)).length=o(e,n,n,r,0,1,t,arguments.length>1?arguments[1]:void 0),e}})},427:function(t,e,n){n(86)("flatMap")},428:function(t,e,n){const r=n(429),o=n(430),c=n(448),l=n(449);function d(t,canvas,text,e,n){const c=[].slice.call(arguments,1),l=c.length,d="function"==typeof c[l-1];if(!d&&!r())throw new Error("Callback required as last argument");if(!d){if(l<1)throw new Error("Too few arguments provided");return 1===l?(text=canvas,canvas=e=void 0):2!==l||canvas.getContext||(e=text,text=canvas,canvas=void 0),new Promise((function(n,r){try{const data=o.create(text,e);n(t(data,canvas,e))}catch(t){r(t)}}))}if(l<2)throw new Error("Too few arguments provided");2===l?(n=text,text=canvas,canvas=e=void 0):3===l&&(canvas.getContext&&void 0===n?(n=e,e=void 0):(n=e,e=text,text=canvas,canvas=void 0));try{const data=o.create(text,e);n(null,t(data,canvas,e))}catch(t){n(t)}}e.create=o.create,e.toCanvas=d.bind(null,c.render),e.toDataURL=d.bind(null,c.renderToDataURL),e.toString=d.bind(null,(function(data,t,e){return l.render(data,e)}))},429:function(t,e){t.exports=function(){return"function"==typeof Promise&&Promise.prototype&&Promise.prototype.then}},430:function(t,e,n){const r=n(395),o=n(400),c=n(431),l=n(432),d=n(433),h=n(434),f=n(435),m=n(409),v=n(436),y=n(439),x=n(440),w=n(396),k=n(441);function C(t,e,n){const r=t.size,o=x.getEncodedBits(e,n);let i,c;for(i=0;i<15;i++)c=1==(o>>i&1),i<6?t.set(i,8,c,!0):i<8?t.set(i+1,8,c,!0):t.set(r-15+i,8,c,!0),i<8?t.set(8,r-i-1,c,!0):i<9?t.set(8,15-i-1+1,c,!0):t.set(8,15-i-1,c,!0);t.set(r-8,8,1,!0)}function O(t,e,n){const o=new c;n.forEach((function(data){o.put(data.mode.bit,4),o.put(data.getLength(),w.getCharCountIndicator(data.mode,t)),data.write(o)}));const l=8*(r.getSymbolTotalCodewords(t)-m.getTotalCodewordsCount(t,e));for(o.getLengthInBits()+4<=l&&o.put(0,4);o.getLengthInBits()%8!=0;)o.putBit(0);const d=(l-o.getLengthInBits())/8;for(let i=0;i<d;i++)o.put(i%2?17:236,8);return function(t,e,n){const o=r.getSymbolTotalCodewords(e),c=m.getTotalCodewordsCount(e,n),l=o-c,d=m.getBlocksCount(e,n),h=d-o%d,f=Math.floor(o/d),y=Math.floor(l/d),x=y+1,w=f-y,k=new v(w);let C=0;const O=new Array(d),A=new Array(d);let I=0;const M=new Uint8Array(t.buffer);for(let b=0;b<d;b++){const t=b<h?y:x;O[b]=M.slice(C,C+t),A[b]=k.encode(O[b]),C+=t,I=Math.max(I,t)}const data=new Uint8Array(o);let i,E,j=0;for(i=0;i<I;i++)for(E=0;E<d;E++)i<O[E].length&&(data[j++]=O[E][i]);for(i=0;i<w;i++)for(E=0;E<d;E++)data[j++]=A[E][i];return data}(o,t,e)}function A(data,t,e,n){let o;if(Array.isArray(data))o=k.fromArray(data);else{if("string"!=typeof data)throw new Error("Invalid data");{let n=t;if(!n){const t=k.rawSplit(data);n=y.getBestVersionForData(t,e)}o=k.fromString(data,n||40)}}const c=y.getBestVersionForData(o,e);if(!c)throw new Error("The amount of data is too big to be stored in a QR Code");if(t){if(t<c)throw new Error("\nThe chosen QR Code version cannot contain this amount of data.\nMinimum version required to store current data is: "+c+".\n")}else t=c;const m=O(t,e,o),v=r.getSymbolSize(t),x=new l(v);return function(t,e){const n=t.size,r=h.getPositions(e);for(let i=0;i<r.length;i++){const e=r[i][0],col=r[i][1];for(let r=-1;r<=7;r++)if(!(e+r<=-1||n<=e+r))for(let o=-1;o<=7;o++)col+o<=-1||n<=col+o||(r>=0&&r<=6&&(0===o||6===o)||o>=0&&o<=6&&(0===r||6===r)||r>=2&&r<=4&&o>=2&&o<=4?t.set(e+r,col+o,!0,!0):t.set(e+r,col+o,!1,!0))}}(x,t),function(t){const e=t.size;for(let n=8;n<e-8;n++){const e=n%2==0;t.set(n,6,e,!0),t.set(6,n,e,!0)}}(x),function(t,e){const n=d.getPositions(e);for(let i=0;i<n.length;i++){const e=n[i][0],col=n[i][1];for(let n=-2;n<=2;n++)for(let r=-2;r<=2;r++)-2===n||2===n||-2===r||2===r||0===n&&0===r?t.set(e+n,col+r,!0,!0):t.set(e+n,col+r,!1,!0)}}(x,t),C(x,e,0),t>=7&&function(t,e){const n=t.size,r=y.getEncodedBits(e);let o,col,c;for(let i=0;i<18;i++)o=Math.floor(i/3),col=i%3+n-8-3,c=1==(r>>i&1),t.set(o,col,c,!0),t.set(col,o,c,!0)}(x,t),function(t,data){const e=t.size;let n=-1,r=e-1,o=7,c=0;for(let col=e-1;col>0;col-=2)for(6===col&&col--;;){for(let e=0;e<2;e++)if(!t.isReserved(r,col-e)){let n=!1;c<data.length&&(n=1==(data[c]>>>o&1)),t.set(r,col-e,n),o--,-1===o&&(c++,o=7)}if(r+=n,r<0||e<=r){r-=n,n=-n;break}}}(x,m),isNaN(n)&&(n=f.getBestMask(x,C.bind(null,x,e))),f.applyMask(n,x),C(x,e,n),{modules:x,version:t,errorCorrectionLevel:e,maskPattern:n,segments:o}}e.create=function(data,t){if(void 0===data||""===data)throw new Error("No input text");let e,mask,n=o.M;return void 0!==t&&(n=o.from(t.errorCorrectionLevel,o.M),e=y.from(t.version),mask=f.from(t.maskPattern),t.toSJISFunc&&r.setToSJISFunction(t.toSJISFunc)),A(data,e,n,mask)}},431:function(t,e){function n(){this.buffer=[],this.length=0}n.prototype={get:function(t){const e=Math.floor(t/8);return 1==(this.buffer[e]>>>7-t%8&1)},put:function(t,e){for(let i=0;i<e;i++)this.putBit(1==(t>>>e-i-1&1))},getLengthInBits:function(){return this.length},putBit:function(t){const e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}},t.exports=n},432:function(t,e){function n(t){if(!t||t<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=t,this.data=new Uint8Array(t*t),this.reservedBit=new Uint8Array(t*t)}n.prototype.set=function(t,col,e,n){const r=t*this.size+col;this.data[r]=e,n&&(this.reservedBit[r]=!0)},n.prototype.get=function(t,col){return this.data[t*this.size+col]},n.prototype.xor=function(t,col,e){this.data[t*this.size+col]^=e},n.prototype.isReserved=function(t,col){return this.reservedBit[t*this.size+col]},t.exports=n},433:function(t,e,n){const r=n(395).getSymbolSize;e.getRowColCoords=function(t){if(1===t)return[];const e=Math.floor(t/7)+2,n=r(t),o=145===n?26:2*Math.ceil((n-13)/(2*e-2)),c=[n-7];for(let i=1;i<e-1;i++)c[i]=c[i-1]-o;return c.push(6),c.reverse()},e.getPositions=function(t){const n=[],r=e.getRowColCoords(t),o=r.length;for(let i=0;i<o;i++)for(let t=0;t<o;t++)0===i&&0===t||0===i&&t===o-1||i===o-1&&0===t||n.push([r[i],r[t]]);return n}},434:function(t,e,n){const r=n(395).getSymbolSize;e.getPositions=function(t){const e=r(t);return[[0,0],[e-7,0],[0,e-7]]}},435:function(t,e){e.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const n=3,r=3,o=40,c=10;function l(t,i,n){switch(t){case e.Patterns.PATTERN000:return(i+n)%2==0;case e.Patterns.PATTERN001:return i%2==0;case e.Patterns.PATTERN010:return n%3==0;case e.Patterns.PATTERN011:return(i+n)%3==0;case e.Patterns.PATTERN100:return(Math.floor(i/2)+Math.floor(n/3))%2==0;case e.Patterns.PATTERN101:return i*n%2+i*n%3==0;case e.Patterns.PATTERN110:return(i*n%2+i*n%3)%2==0;case e.Patterns.PATTERN111:return(i*n%3+(i+n)%2)%2==0;default:throw new Error("bad maskPattern:"+t)}}e.isValid=function(mask){return null!=mask&&""!==mask&&!isNaN(mask)&&mask>=0&&mask<=7},e.from=function(t){return e.isValid(t)?parseInt(t,10):void 0},e.getPenaltyN1=function(data){const t=data.size;let e=0,r=0,o=0,c=null,l=null;for(let d=0;d<t;d++){r=o=0,c=l=null;for(let col=0;col<t;col++){let t=data.get(d,col);t===c?r++:(r>=5&&(e+=n+(r-5)),c=t,r=1),t=data.get(col,d),t===l?o++:(o>=5&&(e+=n+(o-5)),l=t,o=1)}r>=5&&(e+=n+(r-5)),o>=5&&(e+=n+(o-5))}return e},e.getPenaltyN2=function(data){const t=data.size;let e=0;for(let n=0;n<t-1;n++)for(let col=0;col<t-1;col++){const t=data.get(n,col)+data.get(n,col+1)+data.get(n+1,col)+data.get(n+1,col+1);4!==t&&0!==t||e++}return e*r},e.getPenaltyN3=function(data){const t=data.size;let e=0,n=0,r=0;for(let o=0;o<t;o++){n=r=0;for(let col=0;col<t;col++)n=n<<1&2047|data.get(o,col),col>=10&&(1488===n||93===n)&&e++,r=r<<1&2047|data.get(col,o),col>=10&&(1488===r||93===r)&&e++}return e*o},e.getPenaltyN4=function(data){let t=0;const e=data.data.length;for(let i=0;i<e;i++)t+=data.data[i];return Math.abs(Math.ceil(100*t/e/5)-10)*c},e.applyMask=function(pattern,data){const t=data.size;for(let col=0;col<t;col++)for(let e=0;e<t;e++)data.isReserved(e,col)||data.xor(e,col,l(pattern,e,col))},e.getBestMask=function(data,t){const n=Object.keys(e.Patterns).length;let r=0,o=1/0;for(let p=0;p<n;p++){t(p),e.applyMask(p,data);const n=e.getPenaltyN1(data)+e.getPenaltyN2(data)+e.getPenaltyN3(data)+e.getPenaltyN4(data);e.applyMask(p,data),n<o&&(o=n,r=p)}return r}},436:function(t,e,n){const r=n(437);function o(t){this.genPoly=void 0,this.degree=t,this.degree&&this.initialize(this.degree)}o.prototype.initialize=function(t){this.degree=t,this.genPoly=r.generateECPolynomial(this.degree)},o.prototype.encode=function(data){if(!this.genPoly)throw new Error("Encoder not initialized");const t=new Uint8Array(data.length+this.degree);t.set(data);const e=r.mod(t,this.genPoly),n=this.degree-e.length;if(n>0){const t=new Uint8Array(this.degree);return t.set(e,n),t}return e},t.exports=o},437:function(t,e,n){const r=n(438);e.mul=function(t,e){const n=new Uint8Array(t.length+e.length-1);for(let i=0;i<t.length;i++)for(let o=0;o<e.length;o++)n[i+o]^=r.mul(t[i],e[o]);return n},e.mod=function(t,e){let n=new Uint8Array(t);for(;n.length-e.length>=0;){const t=n[0];for(let i=0;i<e.length;i++)n[i]^=r.mul(e[i],t);let o=0;for(;o<n.length&&0===n[o];)o++;n=n.slice(o)}return n},e.generateECPolynomial=function(t){let n=new Uint8Array([1]);for(let i=0;i<t;i++)n=e.mul(n,new Uint8Array([1,r.exp(i)]));return n}},438:function(t,e){const n=new Uint8Array(512),r=new Uint8Array(256);!function(){let t=1;for(let i=0;i<255;i++)n[i]=t,r[t]=i,t<<=1,256&t&&(t^=285);for(let i=255;i<512;i++)n[i]=n[i-255]}(),e.log=function(t){if(t<1)throw new Error("log("+t+")");return r[t]},e.exp=function(t){return n[t]},e.mul=function(t,e){return 0===t||0===e?0:n[r[t]+r[e]]}},439:function(t,e,n){const r=n(395),o=n(409),c=n(400),l=n(396),d=n(410),h=r.getBCHDigit(7973);function f(t,e){return l.getCharCountIndicator(t,e)+4}function m(t,e){let n=0;return t.forEach((function(data){const t=f(data.mode,e);n+=t+data.getBitsLength()})),n}e.from=function(t,e){return d.isValid(t)?parseInt(t,10):e},e.getCapacity=function(t,e,n){if(!d.isValid(t))throw new Error("Invalid QR Code version");void 0===n&&(n=l.BYTE);const c=8*(r.getSymbolTotalCodewords(t)-o.getTotalCodewordsCount(t,e));if(n===l.MIXED)return c;const h=c-f(n,t);switch(n){case l.NUMERIC:return Math.floor(h/10*3);case l.ALPHANUMERIC:return Math.floor(h/11*2);case l.KANJI:return Math.floor(h/13);case l.BYTE:default:return Math.floor(h/8)}},e.getBestVersionForData=function(data,t){let n;const r=c.from(t,c.M);if(Array.isArray(data)){if(data.length>1)return function(t,n){for(let r=1;r<=40;r++)if(m(t,r)<=e.getCapacity(r,n,l.MIXED))return r}(data,r);if(0===data.length)return 1;n=data[0]}else n=data;return function(t,n,r){for(let o=1;o<=40;o++)if(n<=e.getCapacity(o,r,t))return o}(n.mode,n.getLength(),r)},e.getEncodedBits=function(t){if(!d.isValid(t)||t<7)throw new Error("Invalid QR Code version");let e=t<<12;for(;r.getBCHDigit(e)-h>=0;)e^=7973<<r.getBCHDigit(e)-h;return t<<12|e}},440:function(t,e,n){const r=n(395),o=r.getBCHDigit(1335);e.getEncodedBits=function(t,mask){const data=t.bit<<3|mask;let e=data<<10;for(;r.getBCHDigit(e)-o>=0;)e^=1335<<r.getBCHDigit(e)-o;return 21522^(data<<10|e)}},441:function(t,e,n){const r=n(396),o=n(442),c=n(443),l=n(444),d=n(446),h=n(411),f=n(395),m=n(447);function v(t){return unescape(encodeURIComponent(t)).length}function y(t,e,n){const r=[];let o;for(;null!==(o=t.exec(n));)r.push({data:o[0],index:o.index,mode:e,length:o[0].length});return r}function x(t){const e=y(h.NUMERIC,r.NUMERIC,t),n=y(h.ALPHANUMERIC,r.ALPHANUMERIC,t);let o,c;f.isKanjiModeEnabled()?(o=y(h.BYTE,r.BYTE,t),c=y(h.KANJI,r.KANJI,t)):(o=y(h.BYTE_KANJI,r.BYTE,t),c=[]);return e.concat(n,o,c).sort((function(t,e){return t.index-e.index})).map((function(t){return{data:t.data,mode:t.mode,length:t.length}}))}function w(t,e){switch(e){case r.NUMERIC:return o.getBitsLength(t);case r.ALPHANUMERIC:return c.getBitsLength(t);case r.KANJI:return d.getBitsLength(t);case r.BYTE:return l.getBitsLength(t)}}function k(data,t){let e;const n=r.getBestModeForData(data);if(e=r.from(t,n),e!==r.BYTE&&e.bit<n.bit)throw new Error('"'+data+'" cannot be encoded with mode '+r.toString(e)+".\n Suggested mode is: "+r.toString(n));switch(e!==r.KANJI||f.isKanjiModeEnabled()||(e=r.BYTE),e){case r.NUMERIC:return new o(data);case r.ALPHANUMERIC:return new c(data);case r.KANJI:return new d(data);case r.BYTE:return new l(data)}}e.fromArray=function(t){return t.reduce((function(t,e){return"string"==typeof e?t.push(k(e,null)):e.data&&t.push(k(e.data,e.mode)),t}),[])},e.fromString=function(data,t){const n=function(t){const e=[];for(let i=0;i<t.length;i++){const n=t[i];switch(n.mode){case r.NUMERIC:e.push([n,{data:n.data,mode:r.ALPHANUMERIC,length:n.length},{data:n.data,mode:r.BYTE,length:n.length}]);break;case r.ALPHANUMERIC:e.push([n,{data:n.data,mode:r.BYTE,length:n.length}]);break;case r.KANJI:e.push([n,{data:n.data,mode:r.BYTE,length:v(n.data)}]);break;case r.BYTE:e.push([{data:n.data,mode:r.BYTE,length:v(n.data)}])}}return e}(x(data,f.isKanjiModeEnabled())),o=function(t,e){const table={},n={start:{}};let o=["start"];for(let i=0;i<t.length;i++){const c=t[i],l=[];for(let t=0;t<c.length;t++){const d=c[t],h=""+i+t;l.push(h),table[h]={node:d,lastCount:0},n[h]={};for(let t=0;t<o.length;t++){const c=o[t];table[c]&&table[c].node.mode===d.mode?(n[c][h]=w(table[c].lastCount+d.length,d.mode)-w(table[c].lastCount,d.mode),table[c].lastCount+=d.length):(table[c]&&(table[c].lastCount=d.length),n[c][h]=w(d.length,d.mode)+4+r.getCharCountIndicator(d.mode,e))}}o=l}for(let t=0;t<o.length;t++)n[o[t]].end=0;return{map:n,table:table}}(n,t),path=m.find_path(o.map,"start","end"),c=[];for(let i=1;i<path.length-1;i++)c.push(o.table[path[i]].node);return e.fromArray(function(t){return t.reduce((function(t,e){const n=t.length-1>=0?t[t.length-1]:null;return n&&n.mode===e.mode?(t[t.length-1].data+=e.data,t):(t.push(e),t)}),[])}(c))},e.rawSplit=function(data){return e.fromArray(x(data,f.isKanjiModeEnabled()))}},442:function(t,e,n){const r=n(396);function o(data){this.mode=r.NUMERIC,this.data=data.toString()}o.getBitsLength=function(t){return 10*Math.floor(t/3)+(t%3?t%3*3+1:0)},o.prototype.getLength=function(){return this.data.length},o.prototype.getBitsLength=function(){return o.getBitsLength(this.data.length)},o.prototype.write=function(t){let i,e,n;for(i=0;i+3<=this.data.length;i+=3)e=this.data.substr(i,3),n=parseInt(e,10),t.put(n,10);const r=this.data.length-i;r>0&&(e=this.data.substr(i),n=parseInt(e,10),t.put(n,3*r+1))},t.exports=o},443:function(t,e,n){const r=n(396),o=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function c(data){this.mode=r.ALPHANUMERIC,this.data=data}c.getBitsLength=function(t){return 11*Math.floor(t/2)+t%2*6},c.prototype.getLength=function(){return this.data.length},c.prototype.getBitsLength=function(){return c.getBitsLength(this.data.length)},c.prototype.write=function(t){let i;for(i=0;i+2<=this.data.length;i+=2){let e=45*o.indexOf(this.data[i]);e+=o.indexOf(this.data[i+1]),t.put(e,11)}this.data.length%2&&t.put(o.indexOf(this.data[i]),6)},t.exports=c},444:function(t,e,n){const r=n(445),o=n(396);function c(data){this.mode=o.BYTE,this.data=new Uint8Array(r(data))}c.getBitsLength=function(t){return 8*t},c.prototype.getLength=function(){return this.data.length},c.prototype.getBitsLength=function(){return c.getBitsLength(this.data.length)},c.prototype.write=function(t){for(let i=0,e=this.data.length;i<e;i++)t.put(this.data[i],8)},t.exports=c},445:function(t,e,n){"use strict";t.exports=function(input){for(var t=[],e=input.length,n=0;n<e;n++){var r=input.charCodeAt(n);if(r>=55296&&r<=56319&&e>n+1){var o=input.charCodeAt(n+1);o>=56320&&o<=57343&&(r=1024*(r-55296)+o-56320+65536,n+=1)}r<128?t.push(r):r<2048?(t.push(r>>6|192),t.push(63&r|128)):r<55296||r>=57344&&r<65536?(t.push(r>>12|224),t.push(r>>6&63|128),t.push(63&r|128)):r>=65536&&r<=1114111?(t.push(r>>18|240),t.push(r>>12&63|128),t.push(r>>6&63|128),t.push(63&r|128)):t.push(239,191,189)}return new Uint8Array(t).buffer}},446:function(t,e,n){const r=n(396),o=n(395);function c(data){this.mode=r.KANJI,this.data=data}c.getBitsLength=function(t){return 13*t},c.prototype.getLength=function(){return this.data.length},c.prototype.getBitsLength=function(){return c.getBitsLength(this.data.length)},c.prototype.write=function(t){let i;for(i=0;i<this.data.length;i++){let e=o.toSJIS(this.data[i]);if(e>=33088&&e<=40956)e-=33088;else{if(!(e>=57408&&e<=60351))throw new Error("Invalid SJIS character: "+this.data[i]+"\nMake sure your charset is UTF-8");e-=49472}e=192*(e>>>8&255)+(255&e),t.put(e,13)}},t.exports=c},447:function(t,e,n){"use strict";var r={single_source_shortest_paths:function(t,s,e){var n={},o={};o[s]=0;var c,u,l,d,h,f,m,v=r.PriorityQueue.make();for(v.push(s,0);!v.empty();)for(l in u=(c=v.pop()).value,d=c.cost,h=t[u]||{})h.hasOwnProperty(l)&&(f=d+h[l],m=o[l],(void 0===o[l]||m>f)&&(o[l]=f,v.push(l,f),n[l]=u));if(void 0!==e&&void 0===o[e]){var y=["Could not find a path from ",s," to ",e,"."].join("");throw new Error(y)}return n},extract_shortest_path_from_predecessor_list:function(t,e){for(var n=[],u=e;u;)n.push(u),t[u],u=t[u];return n.reverse(),n},find_path:function(t,s,e){var n=r.single_source_shortest_paths(t,s,e);return r.extract_shortest_path_from_predecessor_list(n,e)},PriorityQueue:{make:function(t){var e,n=r.PriorityQueue,o={};for(e in t=t||{},n)n.hasOwnProperty(e)&&(o[e]=n[e]);return o.queue=[],o.sorter=t.sorter||n.default_sorter,o},default_sorter:function(a,b){return a.cost-b.cost},push:function(t,e){var n={value:t,cost:e};this.queue.push(n),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return 0===this.queue.length}}};t.exports=r},448:function(t,e,n){const r=n(412);e.render=function(t,canvas,e){let n=e,o=canvas;void 0!==n||canvas&&canvas.getContext||(n=canvas,canvas=void 0),canvas||(o=function(){try{return document.createElement("canvas")}catch(t){throw new Error("You need to specify a canvas element")}}()),n=r.getOptions(n);const c=r.getImageWidth(t.modules.size,n),l=o.getContext("2d"),image=l.createImageData(c,c);return r.qrToImageData(image.data,t,n),function(t,canvas,e){t.clearRect(0,0,canvas.width,canvas.height),canvas.style||(canvas.style={}),canvas.height=e,canvas.width=e,canvas.style.height=e+"px",canvas.style.width=e+"px"}(l,o,c),l.putImageData(image,0,0),o},e.renderToDataURL=function(t,canvas,n){let r=n;void 0!==r||canvas&&canvas.getContext||(r=canvas,canvas=void 0),r||(r={});const o=e.render(t,canvas,r),c=r.type||"image/png",l=r.rendererOpts||{};return o.toDataURL(c,l.quality)}},449:function(t,e,n){const r=n(412);function o(t,e){const n=t.a/255,r=e+'="'+t.hex+'"';return n<1?r+" "+e+'-opacity="'+n.toFixed(2).slice(1)+'"':r}function c(t,e,n){let r=t+e;return void 0!==n&&(r+=" "+n),r}e.render=function(t,e,n){const l=r.getOptions(e),d=t.modules.size,data=t.modules.data,h=d+2*l.margin,f=l.color.light.a?"<path "+o(l.color.light,"fill")+' d="M0 0h'+h+"v"+h+'H0z"/>':"",path="<path "+o(l.color.dark,"stroke")+' d="'+function(data,t,e){let path="",n=0,r=!1,o=0;for(let i=0;i<data.length;i++){const col=Math.floor(i%t),l=Math.floor(i/t);col||r||(r=!0),data[i]?(o++,i>0&&col>0&&data[i-1]||(path+=r?c("M",col+e,.5+l+e):c("m",n,0),n=0,r=!1),col+1<t&&data[i+1]||(path+=c("h",o),o=0)):n++}return path}(data,d,l.margin)+'"/>',m='viewBox="0 0 '+h+" "+h+'"',v='<svg xmlns="http://www.w3.org/2000/svg" '+(l.width?'width="'+l.width+'" height="'+l.width+'" ':"")+m+' shape-rendering="crispEdges">'+f+path+"</svg>\n";return"function"==typeof n&&n(null,v),v}},450:function(t,e,n){"use strict";e.a={data:function(){return{window:null}},mounted:function(){return Object.assign(this,{window:window})}}},453:function(t,e,n){var map={"./locale":404,"./locale.js":404};function r(t){var e=o(t);return n(e)}function o(t){if(!n.o(map,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return map[t]}r.keys=function(){return Object.keys(map)},r.resolve=o,t.exports=r,r.id=453},455:function(t,e,n){"use strict";var r=n(394),o=n.n(r);e.a=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:768;return{data:function(){return{narrow:!1,wide:!0,width:null}},mounted:function(){var e,n=this;return(e=function(){return n.width=window.innerWidth,n.narrow=n.width<t,n.wide=!n.narrow,console.log("Width changed to ".concat(n.width))})(),window.addEventListener("resize",o.a.debounce(e,100))}}}},457:function(t,e,n){"use strict";var r=n(174).start,o=n(249);t.exports=o("trimStart")?function(){return r(this)}:"".trimStart},458:function(t,e,n){var content=n(496);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(109).default)("7b7cf660",content,!0,{sourceMap:!1})},459:function(t,e,n){var content=n(498);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(109).default)("38b2829e",content,!0,{sourceMap:!1})},463:function(t,e,n){"use strict";n.r(e);var r=n(397),o={mixins:[Object(r.a)("settings",{deep:!0})],props:{title:{type:String,default:"Edit settings"},okTitle:{type:String,default:"Save"},cancelTitle:{type:String,default:"Cancel"},value:{type:Object,required:!0},properties:{type:Object,default:function(){return{}}}}},c=n(68),component=Object(c.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-form",{staticStyle:{width:"100%"}},t._l(t.settings,(function(e,r){return n("EditSettingsInput",{key:r,attrs:{properties:t.properties[r]},model:{value:t.settings[r],callback:function(e){t.$set(t.settings,r,e)},expression:"settings[key]"}})})),1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{EditSettingsInput:n(422).default})},470:function(t,e,n){n(493);var r=n(12),o=n(457);r({target:"String",proto:!0,name:"trimStart",forced:"".trimStart!==o},{trimStart:o})},493:function(t,e,n){var r=n(12),o=n(457);r({target:"String",proto:!0,name:"trimStart",forced:"".trimLeft!==o},{trimLeft:o})},494:function(t,e,n){"use strict";var r=n(12),o=n(136);r({target:"String",proto:!0,forced:n(137)("blink")},{blink:function(){return o(this,"blink","","")}})},495:function(t,e,n){"use strict";n(458)},496:function(t,e,n){var r=n(108)(!1);r.push([t.i,'#eyes[data-v-d9afa138]{font-size:32px;font-family:monospace;white-space:pre}#monologue[data-v-d9afa138]{font-size:20px;font-family:"Playfair Display","Georgia","Times New Roman","Times",serif}',""]),t.exports=r},497:function(t,e,n){"use strict";n(459)},498:function(t,e,n){var r=n(108)(!1);r.push([t.i,".code[data-v-eab8f9fa]{font-family:monospace;background-color:#1e1e1e;color:#d4d4d4;height:calc(100% - 2.5em)}",""]),t.exports=r},523:function(t,e,n){var content=n(683);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(109).default)("1b7833da",content,!0,{sourceMap:!1})},533:function(t,e,n){"use strict";n.r(e);n(173);var r,o,c=n(34),l=n(29),d=n(28),h=n(67),f=n(126),m=n(49),v=n(166),y=(n(84),n(470),n(11),n(22),n(1),n(3),n(18),n(16),n(62),n(50),n(30),n(393)),x={data:function(){var t;return t={state:!1},Object.assign(t,{promise:new Promise((function(e){return Object.assign(t,{resolve:e})}))}),{mounted:t}},mounted:function(){return this.mounted.resolve(),this.mounted.state=!0}},w=n(401),k=n(462),C=n(454);function O(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(m.a)(t);if(e){var o=Object(m.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(f.a)(this,n)}}k.a.initialize({startOnLoad:!1}),k.a.registerExternalDiagrams([C.a]),r=function(t){Object(h.a)(n,t);var e=O(n);function n(){return Object(d.a)(this,n),e.apply(this,arguments)}return Object(l.a)(n)}(Object(v.a)(Error)),o=function(line){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return(line.length-line.trimLeft().length)/t};var A,I={mixins:[x,w.a],props:["value","readonly"],data:function(){return{chartRendered:!1,editInPlainText:!1,wasInvalid:!1,contextChanged:!1}},computed:{context:{get:function(){return this.value},set:function(t){return this.$emit("input",t)}},isValid:function(){var t;try{return this.validate(this.context),this.wasInvalid&&(this.wasInvalid=!1,this.mixpanel.track("Context fixed")),!0}catch(e){return t=e,console.warn(t),this.wasInvalid||(this.wasInvalid=!0,this.mixpanel.track("Invalid context")),!1}},mermaidString:function(){var t;try{this.validate(this.context)}catch(t){return t,""}return t="mindmap\n"+this.context.replace(/[~@\-~"()]/g,(function(t){return"#".concat(t.charCodeAt(0),";")})),console.log(t),t}},watch:{mermaidString:{immediate:!0,handler:(A=Object(c.a)(regeneratorRuntime.mark((function t(e){var element,n=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.chartRendered=!1,console.log("Creating mermaid chart for",e),this.mounted.state){t.next=7;break}return console.log("Waiting for the component to be mounted"),t.next=6,this.mounted.promise;case 6:console.log("Component mounted");case 7:return element=document.getElementById("mermaid-container"),t.abrupt("return",this.$nextTick((function(){return console.log("Updating mermaid chart"),k.a.renderAsync("mermaid-".concat(Date.now()),e,(function(svg){return element.innerHTML=svg,n.chartRendered=!0,console.log("Mermaid chart updated"),element.querySelectorAll("text").forEach((function(element){return element.style.cursor="pointer",element.addEventListener("click",(function(){var text;return text=(text=Array.from(element.querySelectorAll("tspan")).map((function(element){return element.textContent})).join(" ")).replace(/\s+/g," "),n.$emit("node-clicked",Object(y.a)(text))}))}))}))})));case 9:case"end":return t.stop()}}),t,this)}))),function(t){return A.apply(this,arguments)})},context:function(){if(!this.contextChanged)return this.contextChanged=!0,this.mixpanel.track("Context changed")}},methods:{helloWorld:function(){return console.log("Hello world")},validate:function(t){var i,e,n,c,l;if(!t)throw new r("Context is empty");if(n=t.split("\n"),0!==o(n[0]))throw new r("The first line must not be indented");if(0===o(n[1]))throw new r("The second line must be indented");for(l=o(n[1],1),i=e=2,c=n.length;2<=c?e<c:e>c;i=2<=c?++e:--e){if(o(n[i],l)>o(n[i-1],l)+1)throw new r("Line ".concat(i+1," is indented by more than one level more than the previous line"));if(o(n[i],l)<1)throw new r("Line ".concat(i+1," is not indented; only one root topic is allowed"))}return!0}}},M=I,E=(n(497),n(68)),component=Object(E.a)(M,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-col",[n("b-row",{staticClass:"justify-content-center",attrs:{id:"mermaid-container"}}),t.readonly?t._e():[t.isValid?t._e():n("b-alert",{staticClass:"text-left mt-3",attrs:{variant:"danger",show:""}},[n("strong",[t._v("Cannot render the mind map; please edit the context below:")]),n("ul",[n("li",[t._v("Exactly one line with no tabs in the beginning")]),n("li",[t._v("Every next line indented by the same, fewer, or just one more tab than the previous line")])])]),n("b-button",{staticClass:"btn-sm btn-light m-1",attrs:{variant:t.isValid?t.editInPlainText?"outline-success":"light":"outline-danger"},on:{click:function(e){t.editInPlainText=!t.editInPlainText,t.mixpanel.track("Switched plain text context editing "+(t.editInPlainText?"on":"off"))}}},[t._v("ðŸ–‰")]),n("b-button",{staticClass:"btn-sm btn-light m-1",on:{click:function(e){return t.$emit("rebuild")}}},[t._v("â†º")]),n("b-row",{directives:[{name:"show",rawName:"v-show",value:t.editInPlainText||!t.isValid,expression:"editInPlainText || !isValid"}],style:t.isValid?"":"border: 1px solid red; border-radius: 5px; padding: 10px;"},[n("EditSettings",{attrs:{title:"Edit context in plain text",value:{context:t.context},properties:{context:{type:"multiline",monospace:!0,label:"Mind map tree",placeholder:"Main topic\n\tSub-topic\n\t\tSub-sub-topic\n\tAnother sub-topic",description:"Tab/Shift-Tab to indent/unindent lines."}}},on:{input:function(e){t.context=e.context}}})],1)]],2)}),[],!1,null,"eab8f9fa",null);e.default=component.exports;installComponents(component,{EditSettings:n(463).default})},537:function(t,e,n){"use strict";n.r(e);var r,o=n(33),c=n(35),l=n(34),d=(n(84),n(41),n(494),n(16),n(11),n(30),n(22),n(38),n(19),n(15),n(18),n(1),n(413)),h=n(393),f=n(407),m={mixins:[Object(f.a)({keys:["darkmodeEverUsed"],prefix:"mindy"})],props:{polygon:{type:d.a,required:!0},context:{default:"stuff"}},data:function(){return{lines:[],blinkTimeout:null,getLineTimeout:null,darkmodeEverUsed:!1}},mounted:function(){return setTimeout(this.getLine,2e3*Math.random()+1e3),setTimeout(this.blink,2e3*Math.random()+1e3)},computed:{topics:function(){return this.context.split("\n").map((function(line){return line.trim().replace(/^[-*+]\s*/,"").toLowerCase()}))}},methods:{randomTopic:function(){var t;return Object(h.a)("Using topic",this.topics.length>1?(t=this.topics.slice(1),"".concat(this.topics[0]," and ").concat(t[Math.floor(Math.random()*t.length)])):this.topics[0])},getLine:(r=Object(l.a)(regeneratorRuntime.mark((function t(){var e,line,n,r,l,text,d,h;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!=(r=this.$refs)?r.container:void 0){t.next=2;break}return t.abrupt("return");case 2:return e=!!this.lines.length,l=e?"darkmode-continued":"darkmode",this.darkmodeEverUsed&&(l+="-repeated"),n=this.lines.join("â€\nThen: â€œ"),t.next=8,this.polygon.run(l,{topic:this.randomTopic(),previousLines:n},{max_tokens:50,temperature:.7,n:1,stop:["â€",'"']});case 8:return d=t.sent,h=Object(c.a)(d.choices,1),text=h[0].text,d.approximateCost,this.darkmodeEverUsed=!0,(line=text.replace(/[â€"\n].*/,"").trim())&&(this.lines=[].concat(Object(o.a)(this.lines),[line])),t.abrupt("return",this.getLineTimeout=setTimeout(this.getLine,2e3+4e3*Math.random()));case 16:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)}),blink:function(){var t;if(null!=(t=this.$refs)?t.container:void 0)return document.getElementById("eyes").innerText=["( ðŸ‘ï¸ )  ( ðŸ‘ï¸ )","(    )   (    )","(  ðŸ‘ï¸)  (  ðŸ‘ï¸)","(ðŸ‘ï¸  )  (ðŸ‘ï¸  )"][Math.floor(4*Math.random())],this.blinkTimeout=setTimeout(this.blink,1e3*Math.random()+1e3)},turnOnTheLights:function(){var t,e;return e=null,t=new Promise((function(t){return e=t})),this.$emit("wheres-the-fucking-light-switch",t),this.lines.length?this.polygon.run("darkmode-ended",{topic:"stuff",previousLines:this.lines.join("â€\nThen: â€œ")},{max_tokens:50,temperature:.7,n:1,stop:["â€",'"']}).then((function(t){var text=Object(c.a)(t.choices,1)[0].text;return e(text)})):e()}},beforeDestroy:function(){return clearTimeout(this.blinkTimeout),clearTimeout(this.getLineTimeout)}},v=m,y=(n(495),n(68)),component=Object(y.a)(v,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-container",{ref:"container",staticClass:"justify-content-center align-items-center text-center d-flex flex-column",staticStyle:{height:"100vh","background-color":"black",color:"white"},attrs:{fluid:""},on:{dblclick:t.turnOnTheLights}},[n("b-row",[n("b-col",[n("p",{attrs:{id:"eyes"}},[t._v("( ðŸ‘ï¸ )  ( ðŸ‘ï¸ )")]),n("div",{staticClass:"mt-5"},t._l(t.lines,(function(line,e){return n("p",{key:e,attrs:{id:"monologue"},domProps:{textContent:t._s(line)}})})),0)])],1)],1)}),[],!1,null,"d9afa138",null);e.default=component.exports},538:function(t,e,n){"use strict";n.r(e);var r=n(34),o=(n(84),n(87)),c=n.n(o),l=n(399),d=n(401),h=n(407),f={mixins:[l.a,d.a,Object(h.a)({keys:["acknowledged"],prefix:"mindy"})],props:["value"],data:function(){return console.log("OpenAIKeyModal value: ".concat(this.value)),{openAIkey:this.value,checkingKey:!1,keyValid:!!this.value,acknowledged:!1}},computed:{canClose:function(){return this.openAIkey&&this.keyValid&&this.acknowledged}},methods:{show:function(){return this.$refs.openAIKeyModal.show()},hide:function(){return this.$refs.openAIKeyModal.hide()},checkKey:function(){var t=this;return this.try("checkingKey",Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Checking key ".concat(t.openAIkey)),e.next=3,c.a.post("https://api.openai.com/v1/engines/text-ada-001/completions",{prompt:"Hello",max_tokens:1},{headers:{Authorization:"Bearer ".concat(t.openAIkey)}});case 3:return t.$bvToast.toast("Yay, the key is valid! Enjoy the app!",{title:"Success",variant:"success",autoHideDelay:3e3}),t.keyValid=!0,t.$emit("input",t.openAIkey),e.abrupt("return",t.mixpanel.track("OpenAI key validated"));case 7:case"end":return e.stop()}}),e)}))),{errorMessage:function(t){var e;return 401===(null!=t&&null!=(e=t.response)?e.status:void 0)&&"Invalid API key"},except:function(){return t.mixpanel.track("Error checking OpenAI key")}})}}},m=n(68),component=Object(m.a)(f,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-modal",{ref:"openAIKeyModal",attrs:{title:"Enter your OpenAI API key","hide-footer":!t.canClose,"no-close-on-backdrop":!t.canClose,"no-close-on-esc":!t.canClose,"hide-header-close":!t.canClose,"ok-only":""}},[n("h4",[t._v("Why?")]),n("p",[t._v("This app uses the OpenAI API to generate texts.\nWe "),n("a",{attrs:{href:"https://github.com/vzakharov/ideality-nuxt/blob/master/api/polygon/index.coffee",target:"_blank"}},[t._v("do not store")]),t._v("\nyour API key anywhere on our servers.")]),n("p",[t._v("You can get your OpenAI keyÂ "),n("a",{attrs:{href:"https://beta.openai.com/account/api-keys",target:"_blank"}},[t._v("here")]),t._v(".")]),n("b-form",{on:{submit:function(e){return e.preventDefault(),t.checkKey()}}},[n("b-form-group",{attrs:{label:"OpenAI API key","label-for":"openAIkey"}},[n("b-form-input",{attrs:{id:"openAIkey",type:"text",placeholder:"sk-...",disabled:t.checkingKey},model:{value:t.openAIkey,callback:function(e){t.openAIkey=e},expression:"openAIkey"}})],1),n("b-button",{attrs:{type:"submit",variant:t.keyValid?"outline-secondary":"primary",disabled:!t.openAIkey||t.checkingKey}},[n("b-spinner",{directives:[{name:"show",rawName:"v-show",value:t.checkingKey,expression:"checkingKey"}],attrs:{small:"",type:"grow"}}),t._v(t._s(t.checkingKey?"Checking...":"Check and save"))],1)],1),n("b-checkbox",{staticClass:"mt-4",staticStyle:{"font-size":"1.2em"},model:{value:t.acknowledged,callback:function(e){t.acknowledged=e},expression:"acknowledged"}},[t._v("I understand that I will be spending my own OpenAI tokens (credits) to generate texts.")])],1)}),[],!1,null,null,null);e.default=component.exports},682:function(t,e,n){"use strict";n(523)},683:function(t,e,n){var r=n(108)(!1);r.push([t.i,"body{font-size:.75em}.message-content :last-child{margin-bottom:0}label{font-weight:700}.footer{border-top:1px solid #e7e7e7}.footer,.header{background-color:#f7f7f7}.header{border-bottom:1px solid #e7e7e7}",""]),t.exports=r},747:function(t,e,n){"use strict";n.r(e);n(5),n(4),n(6),n(7);var r,o=n(0),c=n(35),l=n(34),d=n(33),h=(n(84),n(24),n(18),n(15),n(16),n(85),n(110),n(2),n(1),n(11),n(30),n(172),n(22),n(133),n(3),n(470),n(38),n(247),n(41),n(87),n(394)),f=n.n(h),m=(n(428),n(414)),v=n(393),y=n(407),x={mounted:function(){var t;if(window.vm){for(t=1;window["vm".concat(t)];)t++;return window["vm".concat(t)]=this}return window.vm=this}},w=n(399),k=n(450),C=n(401),O=n(455),A=n(413);function I(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function M(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?I(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):I(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}r={allowFineTuning:!0,autoBuildContext:!0,numGenerations:3,temperature:.6};var E,j,S,T={mixins:[Object(y.a)({keys:["user","messages","openAIkey","usdSpent","settings","chatboxCollapsed","chatboxHorizontalAnchor","fineTuningRequested"],format:"yaml",prefix:"mindy"}),x,w.a,k.a,C.a,Object(O.a)()],head:function(){var t,content,e=this.routedMessage||{};return t=e.bookmark,content=e.content,{title:this.routedMessage?"".concat((null!=t?t.name:void 0)?"".concat(t.name," (bookmark)"):content," Â· Mindy"):"Mindy Â· Brainstorm with AI",meta:[{name:"viewport",content:"width=device-width, initial-scale=1, user-scalable=no"}]}},data:function(){return{suggestions:[],hoveredMessage:null,fineTuningRequested:!1,chatboxCollapsed:!1,chatboxVerticalAnchor:"top",chatboxHorizontalAnchor:"left",darkmode:!1,settings:r,input:"",lastMessageTime:null,enteredName:"",checkingName:!1,editing:{message:null,input:""},nameUnavailable:!1,user:{name:"you"},messages:[],openAIkey:null,routedMessage:null,typingCount:0,typingInterval:null,usdSpent:0,bot:{name:"mindy",isBot:!0},idsBySlug:null,previousThread:null}},computed:{generating:function(){return this.busy.generatingContext||this.busy.generatingReply},suggestionsContext:function(){if(this.suggestions.length)return Object(v.a)("Suggestion context",this.suggestionsContext=["Hey Mindy!"].concat(Object(d.a)(this.suggestions.map((function(t){return"\t".concat(t)})))).join("\n"))},messageForContext:function(){var t;return this.routedMessage&&Object(v.a)("Message with context for routed message ".concat(this.routedMessage.id),t=this.getMessageWithContext(this.routedMessage)),!t&&this.suggestionsContext&&Object(v.a)("Using suggestions context",t={id:0,context:this.suggestionsContext}),t},context:function(){var t;return null!=(t=this.routedMessage)?t.context:void 0},tree:function(){return new m.a(this.messages,{vm:this})},thread:function(){var t;return this.routedMessage?(null!=(t=this.previousThread)?t.includes(this.routedMessage):void 0)?this.previousThread:this.previousThread=this.tree.thread(this.routedMessage||this.tree.root):[]},lastMessage:function(){return f.a.last(this.thread)},polygon:function(){return new A.a({openAIkey:this.openAIkey,vm:this,vmKey:"usdSpent",spent:this.usdSpent,defaultParameters:{max_tokens:300,n:this.settings.numGenerations,temperature:this.settings.temperature}})}},mounted:function(){var t;return this.mixpanel.track("Started"),this.openAIkey?null!=(t=this.$refs.input)?t.focus():void 0:(console.log("OpenAI key not set; showing modal"),this.$refs.openAIkeyModal.show())},methods:{getSuggestions:function(){var t=this;return this.try("generatingContext",Object(l.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=v.a,e.next=3,function(){var e=Object(l.a)(regeneratorRuntime.mark((function e(){var text,r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.polygon.run("suggest",{},{stop:["\n\n"],temperature:1});case 2:return r=e.sent,o=Object(c.a)(r.choices,1),text=o[0].text,e.abrupt("return",n=text.split("\n").filter((function(line){return line.match(/\?$/)})).map((function(line){return line.replace(/^\d+\.\s*/,"")})));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()();case 3:if(e.t1=n=e.sent,(0,e.t0)("Suggestions:",e.t1),t.suggestions=[].concat(Object(d.a)(t.suggestions),Object(d.a)(n)),!(t.suggestions.length<3)){e.next=8;break}return e.abrupt("return",t.$nextTick(t.getSuggestions));case 8:case"end":return e.stop()}}),e)}))))},getMessageWithContext:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.includeSelf,r=void 0===n||n,o=e.direction,c=void 0===o?"both":o;if(t)return Object(v.a)("Message with context for ".concat(t.id," (direction: ").concat(c,", includeSelf: ").concat(r,")"),function(){switch(c){case"past":return f.a.findLast(this.tree.lineage(t,{includeSelf:r}),(function(t){return t.context}));case"future":return f.a.find(this.tree.heritage(t,{includeSelf:r}),(function(t){return t.context}));case"both":return this.getMessageWithContext(t,{includeSelf:r,direction:"past"})||this.getMessageWithContext(t,{includeSelf:r,direction:"future"})}}.call(this))},bookmark:function(t){var e;if(t.bookmark){if(confirm("Delete the bookmark? THERE IS NO UNDO!"))return this.$set(t,"bookmark",!1)}else if(e=prompt("Bookmark this reply as what? (Leave blank to bookmark anonymously)"))return this.$set(t,"bookmark",!e||{name:e})},turnOffDarkmode:(S=Object(l.a)(regeneratorRuntime.mark((function t(e){var text;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.darkmode=!1,t.prev=1,t.next=4,e;case 4:return text=t.sent,t.abrupt("return",this.$bvToast.toast(text,{title:"ðŸ’¡",variant:"success",autoHideDelay:50*text.length}));case 8:t.prev=8,t.t0=t.catch(1);case 10:case"end":return t.stop()}}),t,this,[[1,8]])}))),function(t){return S.apply(this,arguments)}),upvote:function(t){var e;return this.fineTuningRequested?(e=t.upvoted,this.$set(t,"upvoted",!e),t.upvoted?(this.mixpanel.track("Upvoted"),t.everUpvoted||this.polygon.upvote(t.generationId),this.$set(t,"everUpvoted",!0)):this.mixpanel.track("Unupvoted")):(this.$bvModal.show("fine-tuning-request-modal"),this.fineTuningRequested=!0,this.mixpanel.track("Fine-tuning requested"))},toggleChatboxCollapsed:function(){if(this.chatboxCollapsed=!this.chatboxCollapsed,!this.chatboxCollapsed)return this.chatboxVerticalAnchor="top",this.chatboxHorizontalAnchor="left"},rotateChatboxAnchor:function(){return"top"===this.chatboxVerticalAnchor?"left"===this.chatboxHorizontalAnchor?this.chatboxHorizontalAnchor="right":this.chatboxVerticalAnchor="bottom":"right"===this.chatboxHorizontalAnchor?this.chatboxHorizontalAnchor="left":this.chatboxVerticalAnchor="top"},addMessage:function(t){return this.messages=[].concat(Object(d.a)(this.messages),[t]),t},edit:function(t){return this.editing.message=t,this.editing.input=t.content},sendMessage:function(){var t,e,n,r,o=this,input=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.input,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f.a.last(this.thread)||this.tree.root,d=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return console.log({input:input,parent:c,retrying:d}),(d?this.tree.parent(c):c)!==this.tree.root&&(t=!0,Object(v.a)("Previous messages:",n=this.tree.lineage(c,!d).map((function(t){return{isBot:t.user.isBot,content:t.content}}))),e=n.map((function(t){var e=t.isBot,content=t.content;return"".concat(e?"Mindy":"User",":\n").concat(content)})).join("\n\n")),r=t?"continued":"first",this.try("sending",(function(){var t;return d?t=c:(t=o.addMessage(o.tree.createChild(c,{user:o.user,content:input})),o.input="",o.routedMessage=t,o.$nextTick((function(){var t;return null!=(t=o.$refs.scrollToBottom)?t.scrollIntoView():void 0}))),console.log({message:t}),o.$nextTick((function(){return o.try("generatingReply",Object(l.a)(regeneratorRuntime.mark((function n(){var c,l;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,o.polygon.run(r,{input:input,previousConversation:e},{stop:"User:",n:o.settings.temperature>0?o.settings.numGenerations:1});case 2:return l=n.sent,c=l.choices,l.generationId,o.input="",console.log({message:t,choices:c}),c.forEach((function(e){var n,text=e.text,r=e.generationId;if(n=o.addMessage(o.tree.createChild(t,{user:o.bot,content:text,generationId:r})),console.log({reply:n}),o.settings.autoBuildContext)return o.mixpanel.track("Auto context triggered"),o.$nextTick((function(){return o.generateContext(n)}))})),n.abrupt("return",o.$nextTick((function(){var t;return o.routedMessage=f.a.last(o.messages),null!=(t=o.$refs.scrollToBottom)&&t.scrollIntoView(),o.focusOnInput()})));case 9:case"end":return n.stop()}}),n)}))),{mixpanelProps:{retrying:d,settings:o.settings,lineageLength:o.tree.lineage(c).length},except:function(e){return console.error(e),o.messages=f.a.without(o.messages,t),input=t.content}})}))}),{track:!1})},focusOnInput:function(){return this.$nextTick((function(){var t;return(t=new MutationObserver((function(e){var n,r;if(n=e.find((function(t){var e=t.attributeName,n=t.target.disabled;return"disabled"===e&&!n})))return null!=(r=n.target)&&r.focus(),t.disconnect()}))).observe(document.querySelector("#input"),{attributes:!0})}))},getConversation:function(t){return f.a.isArray(t)||(t=this.tree.lineage(t,{includeSelf:!0})),t.map((function(t){var e=t.user.isBot,content=t.content;return"".concat(e?"Mindy":"User",":\n").concat(content)})).join("\n\n")},generateContext:function(t){var e=this;return this.try("generatingContext",Object(l.a)(regeneratorRuntime.mark((function n(){var r,o,l,d,h,f,m,y,x,text,w,k;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return Object(v.a)("Generating context for",t),y=e.getMessageWithContext(t,{includeSelf:!1,direction:"past"}),x=(r=!!y)?"context-rebuild":"context",Object(v.a)({slug:x}),Object(v.a)("Conversation before ".concat(r?"previous context":"current message"),l=e.getConversation(y||t)),r&&(m=y.context,Object(v.a)("Messages after previous context",h=e.tree.lineage(t,{includeSelf:!0,breakAt:y})),Object(v.a)("Conversation after previous context",o=e.getConversation(h))),n.next=9,e.polygon.run(x,{conversationBeforePreviousContext:l,previousContext:m,conversationAfterPreviousContext:o},{stop:"```",temperature:.5,n:1});case 9:return w=n.sent,k=Object(c.a)(w.choices,1),text=k[0].text,d=function(line){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return(line.length-line.trimLeft().length)/t},f=function(t){var e,n;return e=(t=(t="function"==typeof t.replace?t.replace(/```[\s\S]*?/,""):void 0).trim()).trim().split("\n"),n=d(e[1],1),(e=e.map((function(line){var t;return t=d(line,n),line.replace(/^\s*/,"\t".repeat(t)).replace(/(^\s*)[-*â€¢]\s*/,"$1")}))).join("\n")},n.abrupt("return",e.$set(t,"context",Object(v.a)("Post-processed context",f(text))));case 15:case"end":return n.stop()}}),n)}))),{except:function(t){return console.error(t)}})},cloneAndSend:function(){try{return this.sendMessage(this.editing.input,this.tree.parent(this.editing.message))}finally{this.editing.message=null}}},watch:M(M({},f.a.transform(r,(function(t,e,n){return t["settings.".concat(n)]=function(t){var e;if(!(null!=(e=this.syncLocal.ignoreWatchers)?e.includes("settings"):void 0))return this.mixpanel.track({allowFineTuning:t?"Fine tuning enabled":"Fine tuning disabled",autoBuildContext:t?"Auto context enabled":"Auto context disabled",temperature:"Temperature changed",numGenerations:"Num generations changed"}[n],f.a.isBoolean(t)?void 0:Object(o.a)({},n,t))}}))),{},{usdSpent:function(t,e){var n;if(!(null!=(n=this.syncLocal.ignoreWatchers)?n.includes("usdSpent"):void 0))return console.log("USD spent",t,e),this.mixpanel.track("USD spent",{total:t,delta:t-e})},"busy.generatingReply":function(t){var e=this;return clearInterval(this.typingInterval),t?(this.$nextTick((function(){var t;return null!=(t=e.$refs.scrollToBottom)?t.scrollIntoView():void 0})),this.typingInterval=setInterval((function(){return e.typingCount=(e.typingCount+1)%3}),500)):this.typingCount=0},routedMessage:function(t){var e,n;if(t)return e=t.id,t.user.isBot,this.tree.nudge(t),e!==parseInt(null!=(n=this.$route.query)?n.id:void 0)&&(Object(v.a)("Routing to message #".concat(e)),this.$router.push({query:{id:t.id}})),this.$nextTick((function(){var t;return null!=(t=document.getElementById("message-".concat(e)))?t.scrollIntoView():void 0}))},"$route.query.id":{immediate:!0,handler:(j=Object(l.a)(regeneratorRuntime.mark((function t(e){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(Object(v.a)("Navigating to message #".concat(e)),!e){t.next=7;break}return t.next=4,this.syncLocal.promise;case 4:"last"===e&&(r=f.a.last(this.messages),e=r.id),(n=this.tree.find(parseInt(e)))?this.routedMessage=n:Object(v.a)("Message #".concat(e," not found"));case 7:if(this.routedMessage){t.next=11;break}return t.next=10,this.syncLocal.promise;case 10:return t.abrupt("return",this.getSuggestions());case 11:case"end":return t.stop()}}),t,this)}))),function(t){return j.apply(this,arguments)})},"$route.query.bookmark":{immediate:!0,handler:(E=Object(l.a)(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=10;break}return t.next=3,this.syncLocal.promise;case 3:if(!(n=f.a.find(this.messages,{bookmark:{name:e}}))){t.next=8;break}return t.abrupt("return",this.routedMessage=n);case 8:return Object(v.a)("Bookmark ".concat(e," not found")),t.abrupt("return",this.routedMessage=null);case 10:case"end":return t.stop()}}),t,this)}))),function(t){return E.apply(this,arguments)})}})},_=T,P=(n(682),n(68)),component=Object(P.a)(_,(function(){var t,e=this,n=e.$createElement,r=e._self._c||n;return e.darkmode?r("DarkMode",e._b({on:{"wheres-the-fucking-light-switch":e.turnOffDarkmode}},"DarkMode",{polygon:e.polygon,context:e.context},!1)):r("div",[r("b-container",{staticClass:"px-4",attrs:{fluid:""}},[r("b-row",{staticStyle:{height:"calc(100vh - 80px)"},attrs:{"align-v":"center"}},[e.chatboxCollapsed?r("div",{staticClass:"m-1 p-2 shadow-sm rounded-lg",staticStyle:{"font-size":"1em",cursor:"pointer",position:"absolute",top:"10px",left:"10px","z-index":"1000","background-color":"rgba(0, 0, 0, 0.1)"},on:{click:e.toggleChatboxCollapsed}},[e._v("ðŸ’¬")]):r("b-col",{staticClass:"pt-4",style:e.chatboxCollapsed?(t={position:"fixed"},t[e.chatboxVerticalAnchor]="top"===e.chatboxVerticalAnchor?"10px":"60px",t[e.chatboxHorizontalAnchor]="10px",t.width="64px",t.boxShadow="0 0 10px 0 rgba(0, 0, 0, 0.5)",t.zIndex=1e3,t):{height:e.wide?"calc(100vh - 50px)":"55vh"}},[e.messages?[r("div",{staticClass:"header text-center border-top border-right border-left"},[r("div",{staticClass:"px-2 float-right text-muted",staticStyle:{cursor:"pointer",position:"absolute",top:"25px",left:"15px","z-index":"1000","font-size":"1.5em"},on:{click:e.toggleChatboxCollapsed}},[e._v("â¤£")]),e.wide?r("div",[r("h1",{staticClass:"mb-0 display-3",staticStyle:{"font-size":"3em"}},[e._v("Mindy")]),r("p",{staticClass:"lead",staticStyle:{"font-size":"1em"}},[e._v("Brainstorm with AI")])]):r("div",{staticClass:"lead",staticStyle:{"font-size":"1.5em"}},[e._v("Mindy Â· Brainstorm with AI")])]),e.chatboxCollapsed?e._e():r("div",{staticClass:"border-right border-left",style:{height:e.wide?"calc(100vh - 300px)":"calc(55vh - 170px)",overflowY:"scroll"},attrs:{id:"messages"}},[e._l(e.thread,(function(t,n){return r("div",{key:n,ref:"message-"+t.id,refInFor:!0,staticClass:"message p-2",style:{"background-color":n%2?"#f7f7f7":"#fff",border:t===e.routedMessage&&t!==e.lastMessage?"1px solid #ccc":"none",cursor:t!==e.routedMessage&&t.user.isBot?"pointer":"default"},attrs:{id:"message-"+t.id},on:{click:function(n){e.routedMessage=t}}},[t.special?[r("em",[r("strong",[e._v(e._s(t.user.name)+" "+e._s(t.content))])])]:e._e(),e.tree.numSiblings(t)>1?[r("div",{staticStyle:{"font-size":"0.8em",color:"#aaa",float:"right"}},[r("nuxt-link",{staticClass:"mr-1",staticStyle:{color:"inherit"},attrs:{to:{query:{id:e.tree.sibling(t,-1).id}}},domProps:{textContent:e._s("< "+(e.tree.siblingIndex(t)+1))}}),e._v("/"),r("nuxt-link",{staticClass:"ml-1",staticStyle:{color:"inherit"},attrs:{to:{query:{id:e.tree.sibling(t,1).id}}},domProps:{textContent:e._s(e.tree.numSiblings(t)+" >")}})],1)]:e._e(),t.user.name!==e.user.name||e.editing.message?e._e():[r("a",{class:{"mr-1":e.tree.numSiblings(t)>1},staticStyle:{"font-size":"0.8em",color:"#aaa",float:"right",cursor:"pointer"},domProps:{textContent:e._s("ðŸ–‰")},on:{click:function(n){return e.edit(t)}}})],r("div",{class:{"text-primary":e.user&&t.user.name===e.user.name},style:{fontWeight:"bold"},domProps:{textContent:e._s(t.user.name)}}),e.editing.message!==t?r("div",{staticClass:"message-content",domProps:{innerHTML:e._s(e.$md.render(t.content))},on:{dblclick:function(n){return e.edit(t)}}}):r("div",[r("b-textarea",{attrs:{rows:"3","max-rows":"10"},on:{keydown:[function(n){return!n.type.indexOf("key")&&e._k(n.keyCode,"enter",13,n.key,"Enter")||n.ctrlKey||n.shiftKey||n.altKey||n.metaKey?null:(n.preventDefault(),function(){t.user.isBot||e.cloneAndSend()}.apply(null,arguments))},function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"]))return null;e.editing.message=null}]},model:{value:e.editing.input,callback:function(t){e.$set(e.editing,"input",t)},expression:"editing.input"}}),t.user.isBot?e._e():r("b-button",{staticClass:"m-1",attrs:{size:"sm",variant:"primary"},on:{click:e.cloneAndSend}},[e._v("Save & submit")]),r("b-button",{staticClass:"m-1",attrs:{size:"sm",variant:t.user.isBot?"primary":"outline-secondary"},on:{click:function(n){t.content=e.editing.input,e.editing.message=null}}},[e._v(e._s(t.user.isBot?"Save":"Just save"))]),r("b-button",{staticClass:"m-1",attrs:{variant:"outline-secondary",size:"sm"},on:{click:function(t){e.editing.message=null}}},[e._v("Cancel")]),r("b-button",{staticClass:"m-1",attrs:{variant:"outline-danger",size:"sm"},on:{click:function(n){e.window.confirm("Are you sure you want to delete this message and all of its further replies? THERE IS NO UNDO!")&&(e.messages=e.tree.delete(t),e.routedMessage=e.tree.parent(t),e.editing.message=null)}}},[e._v("Delete")])],1),t===e.routedMessage?[e.busy.generatingReply?r("div",{staticClass:"p-2 text-muted"},[r("em",[e._v("mindy is thinking"+e._s(".".repeat(e.typingCount+1)))])]):e._e()]:e._e(),t===e.routedMessage||t.bookmark||e.hoveredMessage===t?r("b-row",{staticClass:"pt-2",attrs:{"align-h":"between"}},[r("b-col",[t.user.isBot?r("b-button",{staticStyle:{"font-size":"0.8em"},attrs:{variant:"outline-secondary",disabled:e.busy.sending||e.busy.generatingReply,size:"sm"},on:{click:function(n){e.sendMessage(e.tree.parent(t).content,e.tree.parent(t),!0)}}},[e._v("â†º Try again")]):e._e()],1),r("b-col",{staticClass:"text-right"},[t.user.isBot?r("b-button",{staticClass:"mx-1",style:t.upvoted?{}:{filter:"grayscale(100%)"},attrs:{variant:"light",size:"sm"},on:{click:function(n){return e.upvote(t)}}},[e._v("ðŸ‘")]):e._e(),r("b-button",{staticClass:"mx-1",style:t.bookmark?{cursor:"not-allowed"}:{filter:"grayscale(100%)"},attrs:{variant:"light",size:"sm"},on:{click:function(n){return e.bookmark(t)}}},[e._v("ðŸ”–"),t.bookmark&&t.bookmark.name?r("span",{staticClass:"text-muted",domProps:{textContent:e._s(t.bookmark.name)}}):e._e()])],1),r("b-modal",{attrs:{id:"fine-tuning-request-modal",title:"Can we fine-tune Mindy based on your upvotes?","hide-footer":"",centered:""}},[r("p",[r("strong",[e._v("If you upvote a reply, we will send it to our servers and â€œtrainâ€ Mindy to generate more replies like this one.Â ")]),e._v("This will also include the entire conversation thread, so that Mindy can understand the context.")]),r("p",[e._v("In the long run, we hope this will help Mindy generate better replies, and make you a happier user, too.")]),r("p",[e._v("So we will be grateful if you keep this switch on. :)")]),r("p",[e._v("(You can always turn this off in the settings.)")]),r("b-checkbox",{staticClass:"my-4",attrs:{switch:""},model:{value:e.settings.allowFineTuning,callback:function(t){e.$set(e.settings,"allowFineTuning",t)},expression:"settings.allowFineTuning"}},[e._v(e._s(e.settings.allowFineTuning?"Yes, ":"No, donâ€™t ")+"send my upvotes to your servers to make Mindy better.")]),r("p",[e._v("Now letâ€™s upvote that message!")]),r("b-button",{attrs:{variant:"primary",size:"lg"},on:{click:function(n){e.upvote(t),e.$bvModal.hide("fine-tuning-request-modal")}}},[e._v("ðŸ‘ "+e._s(e.settings.allowFineTuning?"Upvote and send to servers":"Just upvote"))])],1)],1):e._e()],2)})),r("div",{ref:"scrollToBottom",attrs:{id:"scrollToBottom"}})],2),e.chatboxCollapsed?e._e():r("div",{staticClass:"footer p-2 border-bottom border-right border-left"},[e.user.name?e._e():[r("b-form-group",{attrs:{label:"Name","label-for":"username"}},[r("b-form-input",{attrs:{id:"username",value:e.enteredName,placeholder:"Enter your name to start chatting"},on:{input:function(t){e.enteredName=t.toLowerCase().replace(/[^a-z0-9-]+/g,"-").replace(/-+/g,"-")},change:function(t){e.user.name=e.enteredName}}})],1)],r("b-form",{staticClass:"mb-0",attrs:{id:"messageInputForm"},on:{submit:function(t){return t.preventDefault(),e.sendMessage()}}},[r("b-form-group",{attrs:{label:e.user&&e.user.name,"label-for":"input"}},[r("b-textarea",{ref:"input",staticStyle:{"font-size":"1em"},attrs:{id:"input",placeholder:"Enter to send, Shift+Enter for new line",disabled:!e.user||e.busy.sending||e.busy.generatingReply},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")||t.ctrlKey||t.shiftKey||t.altKey||t.metaKey?null:(t.preventDefault(),void(e.user&&e.input&&!e.busy.sending&&!e.busy.generatingReply&&e.sendMessage()))}},model:{value:e.input,callback:function(t){e.input=t},expression:"input"}})],1),r("b-button",{attrs:{id:"sendButton",type:"submit",variant:e.busy.sending?"outline-secondary":"primary",disabled:!e.input||e.busy.sending||e.busy.generatingReply,size:"sm"}},[e._v(e._s(e.busy.sending?"Sending...":"Send")),e.busy.sending?r("b-spinner",{attrs:{small:""}}):e._e()],1)],1)],2)]:r("b-spinner")],2),r("b-col",{staticClass:"px-4",class:e.chatboxCollapsed?"col-12":"col-lg-8 col-md-7 col-sm-12 col-12"},[e.routedMessage||e.messageForContext?[e.messageForContext?r("b-row",{staticClass:"justify-content-center text-center",style:e.narrow&&"height: calc(45vh - 50px)",attrs:{"align-v":"center"}},[e.messageForContext.context?r("MindyContext",{key:e.messageForContext.id,style:{filter:e.routedMessage&&e.routedMessage!==e.messageForContext||e.generating?"grayscale(25%) opacity(0.75)":"none"},attrs:{readonly:e.routedMessage!==e.messageForContext||e.generating},on:{rebuild:function(t){return e.generateContext(e.messageForContext)},"node-clicked":function(t){e.input=t,e.$nextTick(e.sendMessage)}},model:{value:e.messageForContext.context,callback:function(t){e.$set(e.messageForContext,"context",t)},expression:"messageForContext.context"}}):e._e()],1):e._e(),r("b-row",{staticClass:"justify-content-center mt-2"},[e.routedMessage&&!e.routedMessage.context&&e.routedMessage.user.isBot?r("b-button",{staticClass:"mx-1",attrs:{disabled:e.busy.sending||e.generating,variant:e.generating?"light":"outline-primary"},on:{click:function(t){return e.generateContext(e.routedMessage)}}},[e._v("ä¸« "+e._s(e.busy.generatingContext?"Building mindmap...":e.busy.generatingReply&&e.settings.autoBuildContext?"A little patience...":"Build mindmap"))]):e._e(),e.messageForContext&&e.messageForContext.id&&e.routedMessage!==e.messageForContext&&!e.generating?r("b-button",{staticClass:"mx-1",staticStyle:{"text-decoration":"none",color:"inherit","font-size":"1.2em"},attrs:{variant:"light",size:"sm",to:{query:{id:e.messageForContext.id}},title:"Go to message for this mindmap"}},[e._v(e._s(e.tree.lineage(e.messageForContext).includes(e.routedMessage)?"Â»":"Â«"))]):e._e()],1)]:r("b-row",{staticClass:"text-muted",attrs:{"align-h":"center",justify:"center"}},[r("b-spinner",{staticClass:"text-muted",attrs:{type:"grow"}}),r("p",{staticClass:"mx-2 lead"},[e._v("Unwrapping the ðŸª„...")])],1)],2)],1),r("OpenAIKeyModal",{ref:"openAIkeyModal",model:{value:e.openAIkey,callback:function(t){e.openAIkey=t},expression:"openAIkey"}}),r("div",{staticClass:"footer p-2 border-top border-right border-left fixed-bottom"},[r("div",{staticClass:"float-right text-right text-muted px-2"},[r("a",{staticStyle:{"text-decoration":"none"},attrs:{href:"https://vzakharov.github.io/buy-me-a-beer/",target:"_blank",title:"Buy me a beer!"},on:{click:function(t){return e.mixpanel.track("Cheers! ðŸº")}}},[e._v("ðŸº")])]),r("div",{staticClass:"float-right text-right text-muted px-2",staticStyle:{cursor:"pointer",position:"fixed",top:"5px",right:"5px","z-index":"9999"},attrs:{title:"Dark mode"},on:{click:function(t){e.mixpanel.track("Dark mode on"),e.darkmode=!0}}},[e._v("â˜¾")]),r("div",{staticClass:"float-right text-right text-muted px-2",staticStyle:{cursor:"pointer"},attrs:{title:"Change OpenAI key"},on:{click:function(t){return e.$refs.openAIkeyModal.show()}}},[e._v(e._s(e.openAIkey?"ðŸ”‘ sk-..."+e.openAIkey.slice(-4):"ðŸ”‘ No OpenAI key"))]),r("div",{staticClass:"float-right text-right text-muted px-2",staticStyle:{cursor:"not-allowed"},attrs:{title:"Approximate USD spent on OpenAI API calls. Click to clear."},on:{click:function(){e.window.confirm("Are you sure you want to clear the cost counter?")&&(e.polygon.spent=0)}}},[e._v("ðŸ’¸ ~$"+e._s(parseFloat(e.polygon.spent).toFixed(2)))]),r("span",{staticClass:"float-left text-right px-2",class:e.settings.autoBuildContext?"text-success":"text-muted",staticStyle:{cursor:"pointer"},attrs:{title:"Auto-build mindmap is "+(e.settings.autoBuildContext?"on":"off")},on:{click:function(t){e.settings.autoBuildContext=!e.settings.autoBuildContext}}},[e._v("ä¸«")]),r("span",{staticClass:"float-left text-right text-muted px-2",staticStyle:{cursor:"pointer"},attrs:{title:"Mindy will generate "+e.settings.numGenerations+" "+(1===e.settings.numGenerations?"reply":"replies")+" at once"},on:{click:function(t){e.settings.numGenerations=e.settings.numGenerations%3+1}}},[e._v("ðŸ’¬ Ã— "+e._s(e.settings.numGenerations))]),r("span",{staticClass:"float-left text-right text-muted px-2",staticStyle:{cursor:"pointer"},attrs:{title:"Mindy will generate replies with a temperature (i.e. â€œcreativityâ€) of "+e.settings.temperature},on:{click:function(t){e.settings.temperature=Math.floor(10*(e.settings.temperature+.2))/10%1.2}}},[e._v(" "+e._s(0==e.settings.temperature?"ðŸ¥±":e.settings.temperature<=.2?"ðŸ˜":e.settings.temperature<=.4?"ðŸ¤”":e.settings.temperature<=.6?"ðŸ˜‰":e.settings.temperature<=.8?"ðŸ˜œ":"ðŸ¤ª")+"\nt="+e._s(Math.round(10*e.settings.temperature)/10))]),r("div",{staticClass:"float-left text-right text-muted px-2",staticStyle:{cursor:"pointer"},attrs:{title:"Edit settings"},on:{click:function(t){return e.$bvModal.show("settings-modal")}}},[e._v("...")]),r("b-modal",{attrs:{id:"settings-modal",title:"Settings","hide-footer":"","hide-header":"",centered:""}},[r("EditSettings",{attrs:{properties:{autoBuildContext:{label:"Auto-build mindmap",description:{true:"Mindy will automatically build a mindmap whenever you navigate to a reply.",false:'You will have to click the "Mindmap" button to build a mindmap.'}},numGenerations:{label:"Number of replies at once",description:"How many replies to generate at once. Increasing this helps explore more options, but also costs more."},temperature:{label:"Temperature",description:"How creative to be. 0 gives deterministic (same) replies, 1 gets... weird. Note that for 0 the number of replies is always 1."},allowFineTuning:{label:"Allow fine-tuning",description:{true:"Mindy will be sending your upvoted replies to our servers to fine-tune her. This helps her generate better replies, and makes you a happier user, too.",false:"Mindy will not be sending your upvoted replies to our servers."}}}},model:{value:e.settings,callback:function(t){e.settings=t},expression:"settings"}})],1)],1)],1)],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{DarkMode:n(537).default,MindyContext:n(533).default,OpenAIKeyModal:n(538).default,EditSettings:n(463).default})}}]);